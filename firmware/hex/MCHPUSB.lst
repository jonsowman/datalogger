MP2COD 4.1, COFF to COD File Converter
Copyright (c) 2006 Microchip Technology Inc.
Listing File Generated: Thu May 17 12:05:12 2012


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.7 2006/11/15 22:53:12 moshtaa Exp $ */                       C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to __init() function */                                    C:\MCC18\src\traditional\startup\c018i.c
                                           extern void __init (void);                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\MCC18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\MCC18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\MCC18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\MCC18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\MCC18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           extern near char __FPFLAGS;                                                      C:\MCC18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
000000   ef21     GOTO      0x1842         _asm goto _startup _endasm                                                       C:\MCC18\src\traditional\startup\c018i.c
000002   f00c                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\MCC18\src\traditional\startup\c018i.c
001842   ee13     LFSR      0x1,0x300          lfsr 1, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
001844   f000                                                                                                               
001846   ee23     LFSR      0x2,0x300          lfsr 2, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
001848   f000                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
00184a   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
00184c   9c01     BCF       0x1,0x6,0x0        bcf __FPFLAGS,RND,0 // Initialize rounding flag for floating point libs      C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
00184e   ec76     CALL      0x16ec,0x0         _do_cinit ();                                                                C:\MCC18\src\traditional\startup\c018i.c
001850   f00b                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // If user defined __init is not found, the one in clib.lib will be used       C:\MCC18\src\traditional\startup\c018i.c
001852   ec2f     CALL      0x185e,0x0       __init ();                                                                     C:\MCC18\src\traditional\startup\c018i.c
001854   f00c                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\MCC18\src\traditional\startup\c018i.c
001856   ecf2     CALL      0x17e4,0x0       main ();                                                                       C:\MCC18\src\traditional\startup\c018i.c
001858   f00b                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
00185a   d7fb     BRA       0x1852           goto loop;                                                                     C:\MCC18\src\traditional\startup\c018i.c
00185c   0012     RETURN    0x0            }                               /* end _startup() */                             C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\MCC18\src\traditional\startup\c018i.c
                                             {                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                             }                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\MCC18\src\traditional\startup\c018i.c
                                           }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\MCC18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\MCC18\src\traditional\startup\c018i.c
                                              */                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\MCC18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\MCC18\src\traditional\startup\c018i.c
0016ec   0e2a     MOVLW     0x2a             TBLPTR = (short long)&_cinit;                                                  C:\MCC18\src\traditional\startup\c018i.c
0016ee   6ef6     MOVWF     0xf6,0x0                                                                                        
0016f0   0e08     MOVLW     0x8                                                                                             
0016f2   6ef7     MOVWF     0xf7,0x0                                                                                        
0016f4   0e00     MOVLW     0x0                                                                                             
0016f6   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
0016f8   0100     MOVLB     0x0                movlb data_ptr                                                               C:\MCC18\src\traditional\startup\c018i.c
0016fa   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
0016fc   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
0016fe   6fe5     MOVWF     0xe5,0x1           movwf curr_entry, 1                                                          C:\MCC18\src\traditional\startup\c018i.c
001700   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
001702   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
001704   6fe6     MOVWF     0xe6,0x1           movwf curr_entry+1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\MCC18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\MCC18\src\traditional\startup\c018i.c
001706   e103     BNZ       0x170e              bnz 3                                                                       C:\MCC18\src\traditional\startup\c018i.c
001708   67e5     TSTFSZ    0xe5,0x1           tstfsz curr_entry, 1                                                         C:\MCC18\src\traditional\startup\c018i.c
00170a   d001     BRA       0x170e             bra 1                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
00170c   d03d     BRA       0x1788             goto done;                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\MCC18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\MCC18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\MCC18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\MCC18\src\traditional\startup\c018i.c
00170e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001710   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001712   6fe0     MOVWF     0xe0,0x1       	movwf prom, 1                                                                   C:\MCC18\src\traditional\startup\c018i.c
001714   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001716   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001718   6fe1     MOVWF     0xe1,0x1       	movwf prom+1, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
00171a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00171c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00171e   6fe2     MOVWF     0xe2,0x1       	movwf prom+2, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\MCC18\src\traditional\startup\c018i.c
001720   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
001722   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001724   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001726   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
001728   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00172a   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00172c   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
00172e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001730   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
001732   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001734   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001736   6fe3     MOVWF     0xe3,0x1       	movwf curr_byte, 1                                                              C:\MCC18\src\traditional\startup\c018i.c
001738   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00173a   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00173c   6fe4     MOVWF     0xe4,0x1       	movwf curr_byte+1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
00173e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001740   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\MCC18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\MCC18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\MCC18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
001742   cff6     MOVFF     0xff6,0xe7           data_ptr = TBLPTR;                                                         C:\MCC18\src\traditional\startup\c018i.c
001744   f0e7                                                                                                               
001746   cff7     MOVFF     0xff7,0xe8                                                                                      
001748   f0e8                                                                                                               
00174a   cff8     MOVFF     0xff8,0xe9                                                                                      
00174c   f0e9                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\MCC18\src\traditional\startup\c018i.c
00174e   c0e0     MOVFF     0xe0,0xff6           TBLPTR = prom;                                                             C:\MCC18\src\traditional\startup\c018i.c
001750   fff6                                                                                                               
001752   c0e1     MOVFF     0xe1,0xff7                                                                                      
001754   fff7                                                                                                               
001756   c0e2     MOVFF     0xe2,0xff8                                                                                      
001758   fff8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\MCC18\src\traditional\startup\c018i.c
00175a   0100     MOVLB     0x0            	movlb curr_byte                                                                 C:\MCC18\src\traditional\startup\c018i.c
00175c   53e3     MOVF      0xe3,0x1,0x1   	movf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\MCC18\src\traditional\startup\c018i.c
00175e   e102     BNZ       0x1764         	bnz 2 // copy_one_byte                                                          C:\MCC18\src\traditional\startup\c018i.c
001760   53e4     MOVF      0xe4,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
001762   e007     BZ        0x1772         	bz 7 // done_copying                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\MCC18\src\traditional\startup\c018i.c
001764   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001766   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001768   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\MCC18\src\traditional\startup\c018i.c
00176a   07e3     DECF      0xe3,0x1,0x1   	decf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
00176c   e2f8     BC        0x175e         	bc -8 // copy_loop                                                              C:\MCC18\src\traditional\startup\c018i.c
00176e   07e4     DECF      0xe4,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\MCC18\src\traditional\startup\c018i.c
001770   d7f9     BRA       0x1764         	bra -7 // copy_one_byte                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\MCC18\src\traditional\startup\c018i.c
001772   c0e7     MOVFF     0xe7,0xff6           TBLPTR = data_ptr;                                                         C:\MCC18\src\traditional\startup\c018i.c
001774   fff6                                                                                                               
001776   c0e8     MOVFF     0xe8,0xff7                                                                                      
001778   fff7                                                                                                               
00177a   c0e9     MOVFF     0xe9,0xff8                                                                                      
00177c   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\MCC18\src\traditional\startup\c018i.c
00177e   0100     MOVLB     0x0                  curr_entry--;                                                              C:\MCC18\src\traditional\startup\c018i.c
001780   07e5     DECF      0xe5,0x1,0x1                                                                                    
001782   0e00     MOVLW     0x0                                                                                             
001784   5be6     SUBWFB    0xe6,0x1,0x1                                                                                    
001786   d7bf     BRA       0x1706               goto test;                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\MCC18\src\traditional\startup\c018i.c
001788   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           /** I N C L U D E S **********************************************************/  C:\datalogger\firmware\main.c
                                           #include <p18cxxx.h>                                                             C:\datalogger\firmware\main.c
                                           #include "system\typedefs.h"                        // Required                  C:\datalogger\firmware\main.c
                                           #include "system\usb\usb.h"                         // Required                  C:\datalogger\firmware\main.c
                                           #include "io_cfg.h"                                 // Required                  C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\datalogger\firmware\main.c
                                           #include "user\user.h"                              // Modifiable                C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           /** V A R I A B L E S ********************************************************/  C:\datalogger\firmware\main.c
                                           #pragma udata                                                                    C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\datalogger\firmware\main.c
                                           static void InitializeSystem(void);                                              C:\datalogger\firmware\main.c
                                           void USBTasks(void);                                                             C:\datalogger\firmware\main.c
                                           void low_isr(void);                                                              C:\datalogger\firmware\main.c
                                           void high_isr(void);                                                             C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           extern void _startup (void);        // See c018i.c in your C18 compiler dir      C:\datalogger\firmware\main.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = 0x000800                                  C:\datalogger\firmware\main.c
                                           void _reset (void)                                                               C:\datalogger\firmware\main.c
                                           {                                                                                C:\datalogger\firmware\main.c
000800   ef21     GOTO      0x1842             _asm goto _startup _endasm                                                   C:\datalogger\firmware\main.c
000802   f00c                                                                                                               
000804   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\main.c
                                           #pragma code                                                                     C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           #pragma code _HIGH_INTERRUPT_VECTOR = 0x000008                                   C:\datalogger\firmware\main.c
                                           void _high_ISR (void)                                                            C:\datalogger\firmware\main.c
                                           {                                                                                C:\datalogger\firmware\main.c
000008   ef0f     GOTO      0x1e               _asm goto high_isr _endasm                                                   C:\datalogger\firmware\main.c
00000a   f000                                                                                                               
00000c   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           #pragma code _LOW_INTERRUPT_VECTOR = 0x000018                                    C:\datalogger\firmware\main.c
                                           void _low_ISR (void)                                                             C:\datalogger\firmware\main.c
                                           {                                                                                C:\datalogger\firmware\main.c
000018   ef21     GOTO      0x42               _asm goto low_isr _endasm                                                    C:\datalogger\firmware\main.c
00001a   f000                                                                                                               
00001c   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           #pragma interrupt high_isr                                                       C:\datalogger\firmware\main.c
00001e   cfda     MOVFF     0xfda,0xfe4    void high_isr(void)                                                              C:\datalogger\firmware\main.c
000020   ffe4                                                                                                               
000022   cfe2     MOVFF     0xfe2,0xfda                                                                                     
000024   ffda                                                                                                               
000026   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\main.c
000028   828c     BSF       0x8c,0x1,0x0   	LATDbits.LATD1 = 1; // Turn RD1 on                                              C:\datalogger\firmware\main.c
00002a   50f2     MOVF      0xf2,0x0,0x0   	if(INTCONbits.TMR0IE && INTCONbits.TMR0IF)                                      C:\datalogger\firmware\main.c
00002c   0b20     ANDLW     0x20                                                                                            
00002e   e005     BZ        0x3a                                                                                            
000030   50f2     MOVF      0xf2,0x0,0x0                                                                                    
000032   0b04     ANDLW     0x4                                                                                             
000034   e002     BZ        0x3a                                                                                            
                                           	{                                                                               C:\datalogger\firmware\main.c
000036   6ad6     CLRF      0xd6,0x0       		TMR0L = 0x00;                                                                  C:\datalogger\firmware\main.c
000038   94f2     BCF       0xf2,0x2,0x0   		INTCONbits.TMR0IF = 0;                                                         C:\datalogger\firmware\main.c
                                           	}                                                                               C:\datalogger\firmware\main.c
00003a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\datalogger\firmware\main.c
00003c   cfe5     MOVFF     0xfe5,0xfda                                                                                     
00003e   ffda                                                                                                               
000040   0011     RETFIE    0x1                                                                                             
                                                                                                                            C:\datalogger\firmware\main.c
                                           #pragma interruptlow low_isr                                                     C:\datalogger\firmware\main.c
000042   cfd8     MOVFF     0xfd8,0xfe4    void low_isr(void)                                                               C:\datalogger\firmware\main.c
000044   ffe4                                                                                                               
000046   cfe0     MOVFF     0xfe0,0xfe4                                                                                     
000048   ffe4                                                                                                               
00004a   6ee4     MOVWF     0xe4,0x0                                                                                        
00004c   cfda     MOVFF     0xfda,0xfe4                                                                                     
00004e   ffe4                                                                                                               
000050   cfe2     MOVFF     0xfe2,0xfda                                                                                     
000052   ffda                                                                                                               
000054   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\main.c
000056   828c     BSF       0x8c,0x1,0x0   	LATDbits.LATD1 = 1; // Turn RD1 on                                              C:\datalogger\firmware\main.c
000058   50f2     MOVF      0xf2,0x0,0x0   	if(INTCONbits.TMR0IE && INTCONbits.TMR0IF)                                      C:\datalogger\firmware\main.c
00005a   0b20     ANDLW     0x20                                                                                            
00005c   e005     BZ        0x68                                                                                            
00005e   50f2     MOVF      0xf2,0x0,0x0                                                                                    
000060   0b04     ANDLW     0x4                                                                                             
000062   e002     BZ        0x68                                                                                            
                                           	{                                                                               C:\datalogger\firmware\main.c
000064   6ad6     CLRF      0xd6,0x0       		TMR0L = 0x00;                                                                  C:\datalogger\firmware\main.c
000066   94f2     BCF       0xf2,0x2,0x0   		INTCONbits.TMR0IF = 0;                                                         C:\datalogger\firmware\main.c
                                           	}                                                                               C:\datalogger\firmware\main.c
000068   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\datalogger\firmware\main.c
00006a   cfe5     MOVFF     0xfe5,0xfda                                                                                     
00006c   ffda                                                                                                               
00006e   50e5     MOVF      0xe5,0x0,0x0                                                                                    
000070   cfe5     MOVFF     0xfe5,0xfe0                                                                                     
000072   ffe0                                                                                                               
000074   cfe5     MOVFF     0xfe5,0xfd8                                                                                     
000076   ffd8                                                                                                               
000078   0010     RETFIE    0x0                                                                                             
                                           #pragma code                                                                     C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           // End interrupt handling                                                        C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           #pragma code                                                                     C:\datalogger\firmware\main.c
                                           void main(void)                                                                  C:\datalogger\firmware\main.c
                                           {                                                                                C:\datalogger\firmware\main.c
0017e4   d807     RCALL     0x17f4             InitializeSystem();                                                          C:\datalogger\firmware\main.c
0017f0   d7fa     BRA       0x17e6             while(1)                                                                     C:\datalogger\firmware\main.c
                                               {                                                                            C:\datalogger\firmware\main.c
0017e6   d810     RCALL     0x1808                 USBTasks();         // USB Tasks                                         C:\datalogger\firmware\main.c
                                           		//UCAM                                                                         C:\datalogger\firmware\main.c
0017e8   ec1c     CALL      0x838,0x0              ProcessIO();        // See user\user.c & .h                              C:\datalogger\firmware\main.c
0017ea   f004                                                                                                               
0017ec   ecc7     CALL      0xd8e,0x0      		UserTasks();                                                                   C:\datalogger\firmware\main.c
0017ee   f006                                                                                                               
                                               }                                                                            C:\datalogger\firmware\main.c
0017f2   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           /* InitializeSystem is a centralize initialization routine.                      C:\datalogger\firmware\main.c
                                            * All required USB initialization routines are called from                      C:\datalogger\firmware\main.c
                                            * here.                                                                         C:\datalogger\firmware\main.c
                                            */                                                                              C:\datalogger\firmware\main.c
                                           static void InitializeSystem(void)                                               C:\datalogger\firmware\main.c
                                           {                                                                                C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                               #if defined(USE_USB_BUS_SENSE_IO)                                            C:\datalogger\firmware\main.c
                                               tris_usb_bus_sense = INPUT_PIN; // See io_cfg.h                              C:\datalogger\firmware\main.c
                                               #endif                                                                       C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                               #if defined(USE_SELF_POWER_SENSE_IO)                                         C:\datalogger\firmware\main.c
                                               tris_self_power = INPUT_PIN;                                                 C:\datalogger\firmware\main.c
                                               #endif                                                                       C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
0017f4   0e14     MOVLW     0x14               mInitializeUSBDriver();         // See usbdrv.h                              C:\datalogger\firmware\main.c
0017f6   6e6f     MOVWF     0x6f,0x0                                                                                        
0017f8   0100     MOVLB     0x0                                                                                             
0017fa   6bf2     CLRF      0xf2,0x1                                                                                        
0017fc   0100     MOVLB     0x0                                                                                             
0017fe   6bf3     CLRF      0xf3,0x1                                                                                        
001800   0100     MOVLB     0x0                                                                                             
001802   6bf4     CLRF      0xf4,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\main.c
001804   efc9     GOTO      0xd92              UserInit();                     // See user.c & .h                           C:\datalogger\firmware\main.c
001806   f006                                                                                                               
                                                                                                                            C:\datalogger\firmware\main.c
                                           }                                                                                C:\datalogger\firmware\main.c
                                                                                                                            C:\datalogger\firmware\main.c
                                           /*                                                                               C:\datalogger\firmware\main.c
                                            * Call this after InitializeSystem()                                            C:\datalogger\firmware\main.c
                                            */                                                                              C:\datalogger\firmware\main.c
                                           void USBTasks(void)                                                              C:\datalogger\firmware\main.c
                                           {                                                                                C:\datalogger\firmware\main.c
                                               // Servicing Hardware                                                        C:\datalogger\firmware\main.c
001808   ecd4     CALL      0x13a8,0x0         USBCheckBusStatus();          // Must use polling method                     C:\datalogger\firmware\main.c
00180a   f009                                                                                                               
00180c   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1)                                                        C:\datalogger\firmware\main.c
00180e   d002     BRA       0x1814                                                                                          
                                           	{                                                                               C:\datalogger\firmware\main.c
001810   ecf0     CALL      0x13e0,0x0             USBDriverService();     // Interrupt or polling method                   C:\datalogger\firmware\main.c
001812   f009                                                                                                               
                                           	}                                                                               C:\datalogger\firmware\main.c
001814   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\main.c
                                           /*********************************************************************           C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *********************************************************************           C:\datalogger\firmware\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Software License Agreement                                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\datalogger\firmware\system\usb\usbmmap.c
                                            * (the Company) for its PICmicro Microcontroller is intended and             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * supplied to you, the Companys customer, for use solely and                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\datalogger\firmware\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            C:\datalogger\firmware\system\usb\usbmmap.c
                                            * license.                                                                      C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN AS IS CONDITION. NO WARRANTIES,             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      C:\datalogger\firmware\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            ********************************************************************/           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * USB Memory Map                                                                C:\datalogger\firmware\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     C:\datalogger\firmware\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              C:\datalogger\firmware\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        C:\datalogger\firmware\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     C:\datalogger\firmware\system\usb\usbmmap.c
                                            * and reduces program size.                                                     C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          C:\datalogger\firmware\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         C:\datalogger\firmware\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     C:\datalogger\firmware\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * BDT is                                                                        C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     C:\datalogger\firmware\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        C:\datalogger\firmware\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 C:\datalogger\firmware\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     C:\datalogger\firmware\system\usb\usbmmap.c
                                            * functions.                                                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 C:\datalogger\firmware\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              C:\datalogger\firmware\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         C:\datalogger\firmware\system\usb\usbmmap.c
                                            * USB interface function:                                                       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              C:\datalogger\firmware\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         C:\datalogger\firmware\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            C:\datalogger\firmware\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          C:\datalogger\firmware\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              C:\datalogger\firmware\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             C:\datalogger\firmware\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           C:\datalogger\firmware\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        C:\datalogger\firmware\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Conclusion:                                                                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           C:\datalogger\firmware\system\usb\usbmmap.c
                                            * be shown as:                                                                  C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              C:\datalogger\firmware\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                C:\datalogger\firmware\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       C:\datalogger\firmware\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      C:\datalogger\firmware\system\usb\usbmmap.c
                                            * smaller program code.                                                         C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\datalogger\firmware\system\usb\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\datalogger\firmware\system\usb\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\datalogger\firmware\system\usb\usbmmap.c
                                                                           // setting for each interface ID                 C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              C:\datalogger\firmware\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            C:\datalogger\firmware\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             C:\datalogger\firmware\system\usb\usbmmap.c
                                           #endif                                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   C:\datalogger\firmware\system\usb\usbmmap.c
                                            ******************************************************************************  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           C:\datalogger\firmware\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\datalogger\firmware\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\datalogger\firmware\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        C:\datalogger\firmware\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbmmap.c
                                            * Section C: Buffer                                                             C:\datalogger\firmware\system\usb\usbmmap.c
                                            ******************************************************************************  C:\datalogger\firmware\system\usb\usbmmap.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far byte usbgen_out[USBGEN_EP_SIZE];                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                           volatile far byte usbgen_in[USBGEN_EP_SIZE];                                     C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\datalogger\firmware\system\usb\usbmmap.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  C:\datalogger\firmware\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           #pragma code                                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           //mod by Tim                                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           //we're assuming the USB is attached - the PIC wouldn't be powered otherwise     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               //if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               //{                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013a8   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013aa   d80c     RCALL     0x13c4                     USBModuleEnable();                  // Is off, enable it             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               //}                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /*                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               else //USB bus not attached                                                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               {		                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   if(UCONbits.USBEN == 1)                 // Is the module on?             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                       USBModuleDisable();                 // Is on, disable it             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           */                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           //end mod by Tim                                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013ac   0100     MOVLB     0x0                if(usb_device_state == ATTACHED_STATE)                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013ae   05f2     DECF      0xf2,0x0,0x1                                                                                    
0013b0   e108     BNZ       0x13c2                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013b2   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013b4   d006     BRA       0x13c2                                                                                          
                                                   {                                                                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013b6   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013b8   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013ba   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013bc   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013be   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013c0   6ff2     MOVWF     0xf2,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013c2   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013c4   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013c6   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013c8   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013ca   0100     MOVLB     0x0                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013cc   0e01     MOVLW     0x1                                                                                             
0013ce   6ff2     MOVWF     0xf2,0x1                                                                                        
0013d0   0012     RETURN    0x0            }//end USBModuleEnable                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013d2   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013d4   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013d6   0100     MOVLB     0x0                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013d8   6bf2     CLRF      0xf2,0x1                                                                                        
0013da   0012     RETURN    0x0            }//end USBModuleDisable                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013dc   efe9     GOTO      0x13d2             USBModuleDisable();                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013de   f009                                                                                                               
                                           }//end USBSoftDetach                                                             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013e0   0100     MOVLB     0x0                if(usb_device_state == DETACHED_STATE) return;                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013e2   51f2     MOVF      0xf2,0x0,0x1                                                                                    
0013e4   e101     BNZ       0x13e8                                                                                          
0013e6   d03a     BRA       0x145c                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013e8   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013ea   0b04     ANDLW     0x4                                                                                             
0013ec   e004     BZ        0x13f6                                                                                          
0013ee   5069     MOVF      0x69,0x0,0x0                                                                                    
0013f0   0b04     ANDLW     0x4                                                                                             
0013f2   e001     BZ        0x13f6                                                                                          
0013f4   d838     RCALL     0x1466                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013f6   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013f8   d031     BRA       0x145c                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013fa   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0013fc   0b01     ANDLW     0x1                                                                                             
0013fe   e004     BZ        0x1408                                                                                          
001400   5069     MOVF      0x69,0x0,0x0                                                                                    
001402   0b01     ANDLW     0x1                                                                                             
001404   e001     BZ        0x1408                                                                                          
001406   d850     RCALL     0x14a8                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001408   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00140a   0b10     ANDLW     0x10                                                                                            
00140c   e004     BZ        0x1416                                                                                          
00140e   5069     MOVF      0x69,0x0,0x0                                                                                    
001410   0b10     ANDLW     0x10                                                                                            
001412   e001     BZ        0x1416                                                                                          
001414   d824     RCALL     0x145e                                                                                          
001416   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001418   0b40     ANDLW     0x40                                                                                            
00141a   e004     BZ        0x1424                                                                                          
00141c   5069     MOVF      0x69,0x0,0x0                                                                                    
00141e   0b40     ANDLW     0x40                                                                                            
001420   e001     BZ        0x1424                                                                                          
001422   d837     RCALL     0x1492                                                                                          
001424   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001426   0b20     ANDLW     0x20                                                                                            
001428   e004     BZ        0x1432                                                                                          
00142a   5069     MOVF      0x69,0x0,0x0                                                                                    
00142c   0b20     ANDLW     0x20                                                                                            
00142e   e001     BZ        0x1432                                                                                          
001430   d832     RCALL     0x1496                                                                                          
001432   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001434   0b02     ANDLW     0x2                                                                                             
001436   e004     BZ        0x1440                                                                                          
001438   5069     MOVF      0x69,0x0,0x0                                                                                    
00143a   0b02     ANDLW     0x2                                                                                             
00143c   e001     BZ        0x1440                                                                                          
00143e   d832     RCALL     0x14a4                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001440   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001442   0100     MOVLB     0x0                                                                                             
001444   5df2     SUBWF     0xf2,0x0,0x1                                                                                    
001446   e201     BC        0x144a                                                                                          
001448   d009     BRA       0x145c                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00144a   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00144c   0b08     ANDLW     0x8                                                                                             
00144e   e006     BZ        0x145c                                                                                          
001450   5069     MOVF      0x69,0x0,0x0                                                                                    
001452   0b08     ANDLW     0x8                                                                                             
001454   e003     BZ        0x145c                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001456   ec7b     CALL      0x10f6,0x0             USBCtrlEPService();                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001458   f008                                                                                                               
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00145a   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00145c   0012     RETURN    0x0            }//end USBDriverService                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00145e   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001460   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001462   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001464   0012     RETURN    0x0            }//end USBSuspend                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001466   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001468   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00146a   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00146c   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00146e   0100     MOVLB     0x0                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001470   a1f3     BTFSS     0xf3,0x0,0x1                                                                                    
001472   d00e     BRA       0x1490                                                                                          
                                               {                                       // has been enabled by the host.     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001474   dff8     RCALL     0x1466                 USBWakeFromSuspend();               // Unsuspend USB modue               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001476   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001478   0100     MOVLB     0x0                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00147a   0e08     MOVLW     0x8                                                                                             
00147c   6ff6     MOVWF     0xf6,0x1                                                                                        
00147e   0e07     MOVLW     0x7                                                                                             
001480   6ff7     MOVWF     0xf7,0x1                                                                                        
                                                   do                                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001482   07f6     DECF      0xf6,0x1,0x1               delay_count--;                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001484   0e00     MOVLW     0x0                                                                                             
001486   5bf7     SUBWFB    0xf7,0x1,0x1                                                                                    
001488   51f6     MOVF      0xf6,0x0,0x1           }while(delay_count);                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00148a   11f7     IORWF     0xf7,0x0,0x1                                                                                    
00148c   e1fa     BNZ       0x1482                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00148e   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001490   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001492   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001494   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  If                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Above description is not quite true at this point.                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *       It seems the SIE never returns the UOWN bit to CPU,                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *       and a TRNIF is never generated upon successful                      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *       reception of a SETUP transaction.                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                *       Firmware work-around is implemented below.                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001496   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001498   d003     BRA       0x14a0                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00149a   ecc6     CALL      0x138c,0x0             USBPrepareForNextSetupTrf();        // Firmware Work-Around              C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00149c   f009                                                                                                               
00149e   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014a0   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014a2   0012     RETURN    0x0            }//end USBStallHandler                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014a4   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014a6   0012     RETURN    0x0            }//end USBErrorHandler                                                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014a8   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014aa   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014ac   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014ae   6e6b     MOVWF     0x6b,0x0                                                                                        
0014b0   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014b2   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014b4   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014b6   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0014ba   0e71     MOVLW     0x71                                                                                            
0014bc   6ee6     MOVWF     0xe6,0x0                                                                                        
0014be   0e0f     MOVLW     0xf                                                                                             
0014c0   6ee6     MOVWF     0xe6,0x0                                                                                        
0014c2   d814     RCALL     0x14ec                                                                                          
0014c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014c6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014ca   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014cc   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014ce   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014d0   d002     BRA       0x14d6                                                                                          
0014d4   d7fc     BRA       0x14ce                                                                                          
0014d2   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014d6   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014d8   ecc6     CALL      0x138c,0x0         USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014da   f009                                                                                                               
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014dc   0100     MOVLB     0x0                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014de   91f3     BCF       0xf3,0x0,0x1                                                                                    
0014e0   0100     MOVLB     0x0                usb_active_cfg = 0;             // Clear active configuration                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014e2   6bf4     CLRF      0xf4,0x1                                                                                        
0014e4   0100     MOVLB     0x0                usb_device_state = DEFAULT_STATE;                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014e6   0e03     MOVLW     0x3                                                                                             
0014e8   6ff2     MOVWF     0xf2,0x1                                                                                        
0014ea   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014ec   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014ee   ffe6                                                                                                               
0014f0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0014f2   ffd9                                                                                                               
                                           {                                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014f4   0efd     MOVLW     0xfd               *startAdr;                                                                   C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
0014f6   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0014f8   ffe9                                                                                                               
0014fa   0efe     MOVLW     0xfe                                                                                            
0014fc   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0014fe   ffea                                                                                                               
001500   0efc     MOVLW     0xfc               while(count)                                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001502   50db     MOVF      0xdb,0x0,0x0                                                                                    
001504   e004     BZ        0x150e                                                                                          
00150c   d7f9     BRA       0x1500                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   _asm                                                                     C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001506   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                                   _endasm                                                                  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001508   0efc     MOVLW     0xfc                   count--;                                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00150a   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
00150e   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
001510   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001512   ffd9                                                                                                               
001514   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  C:\datalogger\firmware\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           #pragma code                                                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
000dee   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 C:\datalogger\firmware\system\usb\usb9\usb9.c
000df0   5118     MOVF      0x18,0x0,0x1                                                                                    
000df2   0b60     ANDLW     0x60                                                                                            
000df4   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000df6   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000df8   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000dfa   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000dfc   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000dfe   0900     IORLW     0x0                                                                                             
000e00   e001     BZ        0xe04                                                                                           
000e02   d055     BRA       0xeae                                                                                           
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000e04   5119     MOVF      0x19,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
000e06   0a07     XORLW     0x7                                                                                             
000e08   e051     BZ        0xeac                                                                                           
000e0a   0a0b     XORLW     0xb                                                                                             
000e0c   e04f     BZ        0xeac                                                                                           
000e0e   0a07     XORLW     0x7                                                                                             
000e10   e040     BZ        0xe92                                                                                           
000e12   0a01     XORLW     0x1                                                                                             
000e14   e02c     BZ        0xe6e                                                                                           
000e16   0a0b     XORLW     0xb                                                                                             
000e18   e028     BZ        0xe6a                                                                                           
000e1a   0a02     XORLW     0x2                                                                                             
000e1c   e026     BZ        0xe6a                                                                                           
000e1e   0a03     XORLW     0x3                                                                                             
000e20   e022     BZ        0xe66                                                                                           
000e22   0a08     XORLW     0x8                                                                                             
000e24   e012     BZ        0xe4a                                                                                           
000e26   0a01     XORLW     0x1                                                                                             
000e28   e00e     BZ        0xe46                                                                                           
000e2a   0a0f     XORLW     0xf                                                                                             
000e2c   e00a     BZ        0xe42                                                                                           
000e2e   0a03     XORLW     0x3                                                                                             
000e30   e001     BZ        0xe34                                                                                           
000e32   d03c     BRA       0xeac                                                                                           
                                               {                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000e34   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000e36   0e01     MOVLW     0x1                                                                                             
000e38   6feb     MOVWF     0xeb,0x1                                                                                        
000e3a   0100     MOVLB     0x0                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\datalogger\firmware\system\usb\usb9\usb9.c
000e3c   0e04     MOVLW     0x4                                                                                             
000e3e   6ff2     MOVWF     0xf2,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\datalogger\firmware\system\usb\usb9\usb9.c
000e40   d036     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000e42   d836     RCALL     0xeb0                      USBStdGetDscHandler();                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
000e44   d034     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000e46   d890     RCALL     0xf68                      USBStdSetCfgHandler();                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
000e48   d032     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000e4a   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000e4c   0e01     MOVLW     0x1                                                                                             
000e4e   6feb     MOVWF     0xeb,0x1                                                                                        
000e50   0100     MOVLB     0x0                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\datalogger\firmware\system\usb\usb9\usb9.c
000e52   0ef4     MOVLW     0xf4                                                                                            
000e54   6fec     MOVWF     0xec,0x1                                                                                        
000e56   0e00     MOVLW     0x0                                                                                             
000e58   6fed     MOVWF     0xed,0x1                                                                                        
000e5a   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\datalogger\firmware\system\usb\usb9\usb9.c
000e5c   93f3     BCF       0xf3,0x1,0x1                                                                                    
000e5e   0100     MOVLB     0x0                        LSB(wCount) = 1;                            // Set data count        C:\datalogger\firmware\system\usb\usb9\usb9.c
000e60   0e01     MOVLW     0x1                                                                                             
000e62   6ff0     MOVWF     0xf0,0x1                                                                                        
000e64   d024     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
000e66   d8a8     RCALL     0xfb8                      USBStdGetStatusHandler();                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000e68   d022     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
000e6a   d8f4     RCALL     0x1054                     USBStdFeatureReqHandler();                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
000e6c   d020     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
000e6e   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000e70   0e01     MOVLW     0x1                                                                                             
000e72   6feb     MOVWF     0xeb,0x1                                                                                        
000e74   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    C:\datalogger\firmware\system\usb\usb9\usb9.c
000e76   511c     MOVF      0x1c,0x0,0x1                                                                                    
000e78   0100     MOVLB     0x0                                                                                             
000e7a   6fec     MOVWF     0xec,0x1                                                                                        
000e7c   6bed     CLRF      0xed,0x1                                                                                        
000e7e   0ef5     MOVLW     0xf5                                                                                            
000e80   27ec     ADDWF     0xec,0x1,0x1                                                                                    
000e82   0e00     MOVLW     0x0                                                                                             
000e84   23ed     ADDWFC    0xed,0x1,0x1                                                                                    
000e86   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\datalogger\firmware\system\usb\usb9\usb9.c
000e88   93f3     BCF       0xf3,0x1,0x1                                                                                    
000e8a   0100     MOVLB     0x0                        LSB(wCount) = 1;                            // Set data count        C:\datalogger\firmware\system\usb\usb9\usb9.c
000e8c   0e01     MOVLW     0x1                                                                                             
000e8e   6ff0     MOVWF     0xf0,0x1                                                                                        
000e90   d00e     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
000e92   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000e94   0e01     MOVLW     0x1                                                                                             
000e96   6feb     MOVWF     0xeb,0x1                                                                                        
000e98   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    C:\datalogger\firmware\system\usb\usb9\usb9.c
000e9a   511c     MOVF      0x1c,0x0,0x1                                                                                    
000e9c   6aea     CLRF      0xea,0x0                                                                                        
000e9e   0ff5     ADDLW     0xf5                                                                                            
000ea0   6ee9     MOVWF     0xe9,0x0                                                                                        
000ea2   0e00     MOVLW     0x0                                                                                             
000ea4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000ea6   c41a     MOVFF     0x41a,0xfef                                                                                     
000ea8   ffef                                                                                                               
000eaa   d001     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   default:                                                                 C:\datalogger\firmware\system\usb\usb9\usb9.c
000eac   d000     BRA       0xeae                      break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000eae   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
000eb0   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
000eb2   0104     MOVLB     0x4                                                                                             
000eb4   5d18     SUBWF     0x18,0x0,0x1                                                                                    
000eb6   e157     BNZ       0xf66                                                                                           
                                               {                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000eb8   511b     MOVF      0x1b,0x0,0x1           switch(SetupPkt.bDscType)                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
000eba   0a03     XORLW     0x3                                                                                             
000ebc   e034     BZ        0xf26                                                                                           
000ebe   0a01     XORLW     0x1                                                                                             
000ec0   e010     BZ        0xee2                                                                                           
000ec2   0a03     XORLW     0x3                                                                                             
000ec4   e001     BZ        0xec8                                                                                           
000ec6   d04d     BRA       0xf62                                                                                           
                                                   {                                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
000ec8   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              C:\datalogger\firmware\system\usb\usb9\usb9.c
000eca   0e01     MOVLW     0x1                                                                                             
000ecc   6feb     MOVWF     0xeb,0x1                                                                                        
000ece   0100     MOVLB     0x0                            pSrc.bRom = (rom byte*)&device_dsc;                              C:\datalogger\firmware\system\usb\usb9\usb9.c
000ed0   0e34     MOVLW     0x34                                                                                            
000ed2   6fec     MOVWF     0xec,0x1                                                                                        
000ed4   0e16     MOVLW     0x16                                                                                            
000ed6   6fed     MOVWF     0xed,0x1                                                                                        
000ed8   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    C:\datalogger\firmware\system\usb\usb9\usb9.c
000eda   0100     MOVLB     0x0                                                                                             
000edc   6ff0     MOVWF     0xf0,0x1                                                                                        
000ede   6bf1     CLRF      0xf1,0x1                                                                                        
000ee0   d040     BRA       0xf62                          break;                                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
000ee2   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              C:\datalogger\firmware\system\usb\usb9\usb9.c
000ee4   0e01     MOVLW     0x1                                                                                             
000ee6   6feb     MOVWF     0xeb,0x1                                                                                        
000ee8   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    C:\datalogger\firmware\system\usb\usb9\usb9.c
000eea   511a     MOVF      0x1a,0x0,0x1                                                                                    
000eec   6ef6     MOVWF     0xf6,0x0                                                                                        
000eee   6af7     CLRF      0xf7,0x0                                                                                        
000ef0   90d8     BCF       0xd8,0x0,0x0                                                                                    
000ef2   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000ef4   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000ef6   0ee2     MOVLW     0xe2                                                                                            
000ef8   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000efa   0e16     MOVLW     0x16                                                                                            
000efc   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000efe   0009     TBLRDPOSTINC                                                                                              
000f00   cff5     MOVFF     0xff5,0xec                                                                                      
000f02   f0ec                                                                                                               
000f04   000a     TBLRDPOSTDEC                                                                                              
000f06   cff5     MOVFF     0xff5,0xed                                                                                      
000f08   f0ed                                                                                                               
000f0a   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    C:\datalogger\firmware\system\usb\usb9\usb9.c
000f0c   0100     MOVLB     0x0                                                                                             
000f0e   6af7     CLRF      0xf7,0x0                                                                                        
000f10   25ec     ADDWF     0xec,0x0,0x1                                                                                    
000f12   6ef6     MOVWF     0xf6,0x0                                                                                        
000f14   51ed     MOVF      0xed,0x0,0x1                                                                                    
000f16   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000f18   0009     TBLRDPOSTINC                                                                                              
000f1a   cff5     MOVFF     0xff5,0xf0                                                                                      
000f1c   f0f0                                                                                                               
000f1e   000a     TBLRDPOSTDEC                                                                                              
000f20   cff5     MOVFF     0xff5,0xf1                                                                                      
000f22   f0f1                                                                                                               
000f24   d01e     BRA       0xf62                          break;                                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
000f26   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              C:\datalogger\firmware\system\usb\usb9\usb9.c
000f28   0e01     MOVLW     0x1                                                                                             
000f2a   6feb     MOVWF     0xeb,0x1                                                                                        
000f2c   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                    C:\datalogger\firmware\system\usb\usb9\usb9.c
000f2e   511a     MOVF      0x1a,0x0,0x1                                                                                    
000f30   6ef6     MOVWF     0xf6,0x0                                                                                        
000f32   6af7     CLRF      0xf7,0x0                                                                                        
000f34   90d8     BCF       0xd8,0x0,0x0                                                                                    
000f36   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000f38   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000f3a   0ee6     MOVLW     0xe6                                                                                            
000f3c   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000f3e   0e16     MOVLW     0x16                                                                                            
000f40   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000f42   0009     TBLRDPOSTINC                                                                                              
000f44   cff5     MOVFF     0xff5,0xec                                                                                      
000f46   f0ec                                                                                                               
000f48   000a     TBLRDPOSTDEC                                                                                              
000f4a   cff5     MOVFF     0xff5,0xed                                                                                      
000f4c   f0ed                                                                                                               
000f4e   c0ec     MOVFF     0xec,0xff6                     wCount._word = *pSrc.bRom;                  // Set data count    C:\datalogger\firmware\system\usb\usb9\usb9.c
000f50   fff6                                                                                                               
000f52   c0ed     MOVFF     0xed,0xff7                                                                                      
000f54   fff7                                                                                                               
000f56   0008     TBLRD                                                                                                     
000f58   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000f5a   0100     MOVLB     0x0                                                                                             
000f5c   6ff0     MOVWF     0xf0,0x1                                                                                        
000f5e   6bf1     CLRF      0xf1,0x1                                                                                        
000f60   d000     BRA       0xf62                          break;                                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   }//end switch                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000f62   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type   C:\datalogger\firmware\system\usb\usb9\usb9.c
000f64   83f3     BSF       0xf3,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
000f66   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
000f68   0100     MOVLB     0x0                ctrl_trf_session_owner = MUID_USB9;                                          C:\datalogger\firmware\system\usb\usb9\usb9.c
000f6a   0e01     MOVLW     0x1                                                                                             
000f6c   6feb     MOVWF     0xeb,0x1                                                                                        
000f6e   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000f70   6ee6     MOVWF     0xe6,0x0                                                                                        
000f72   0e71     MOVLW     0x71                                                                                            
000f74   6ee6     MOVWF     0xe6,0x0                                                                                        
000f76   0e0f     MOVLW     0xf                                                                                             
000f78   6ee6     MOVWF     0xe6,0x0                                                                                        
000f7a   ec76     CALL      0x14ec,0x0                                                                                      
000f7c   f00a                                                                                                               
000f7e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f80   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f82   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f84   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                C:\datalogger\firmware\system\usb\usb9\usb9.c
000f86   6ee6     MOVWF     0xe6,0x0                                                                                        
000f88   0ef5     MOVLW     0xf5                                                                                            
000f8a   6ee6     MOVWF     0xe6,0x0                                                                                        
000f8c   0e00     MOVLW     0x0                                                                                             
000f8e   6ee6     MOVWF     0xe6,0x0                                                                                        
000f90   ec76     CALL      0x14ec,0x0                                                                                      
000f92   f00a                                                                                                               
000f94   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f96   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f98   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f9a   c41a     MOVFF     0x41a,0xf4         usb_active_cfg = SetupPkt.bCfgValue;                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
000f9c   f0f4                                                                                                               
000f9e   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000fa0   511a     MOVF      0x1a,0x0,0x1                                                                                    
000fa2   e104     BNZ       0xfac                                                                                           
000fa4   0100     MOVLB     0x0                    usb_device_state = ADDRESS_STATE;                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
000fa6   0e05     MOVLW     0x5                                                                                             
000fa8   6ff2     MOVWF     0xf2,0x1                                                                                        
000faa   d005     BRA       0xfb6              else                                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                               {                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000fac   0100     MOVLB     0x0                    usb_device_state = CONFIGURED_STATE;                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
000fae   0e06     MOVLW     0x6                                                                                             
000fb0   6ff2     MOVWF     0xf2,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   #if defined(USB_USE_GEN)                // See autofiles\usbcfg.h        C:\datalogger\firmware\system\usb\usb9\usb9.c
000fb2   ec8b     CALL      0x1516,0x0             USBGenInitEP();                                                          C:\datalogger\firmware\system\usb\usb9\usb9.c
000fb4   f00a                                                                                                               
                                                   #endif                                                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
000fb6   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
000fb8   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        C:\datalogger\firmware\system\usb\usb9\usb9.c
000fba   6b20     CLRF      0x20,0x1                                                                                        
000fbc   6b21     CLRF      0x21,0x1           CtrlTrfData._byte1 = 0;                                                      C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000fbe   0104     MOVLB     0x4                switch(SetupPkt.Recipient)                                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
000fc0   5118     MOVF      0x18,0x0,0x1                                                                                    
000fc2   0b1f     ANDLW     0x1f                                                                                            
000fc4   0a02     XORLW     0x2                                                                                             
000fc6   e014     BZ        0xff0                                                                                           
000fc8   0a03     XORLW     0x3                                                                                             
000fca   e00e     BZ        0xfe8                                                                                           
000fcc   0a01     XORLW     0x1                                                                                             
000fce   e001     BZ        0xfd2                                                                                           
000fd0   d033     BRA       0x1038                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
000fd2   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000fd4   0e01     MOVLW     0x1                                                                                             
000fd6   6feb     MOVWF     0xeb,0x1                                                                                        
                                                       /*                                                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                        */                                                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                       if(self_power == 1)                     // self_power defined in io_cfg.h C:\datalogger\firmware\system\usb\usb9\usb9.c
000fd8   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000fda   8120     BSF       0x20,0x0,0x1                                                                                    
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000fdc   0100     MOVLB     0x0                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\datalogger\firmware\system\usb\usb9\usb9.c
000fde   a1f3     BTFSS     0xf3,0x0,0x1                                                                                    
000fe0   d002     BRA       0xfe6                                                                                           
000fe2   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000fe4   8320     BSF       0x20,0x1,0x1                                                                                    
000fe6   d028     BRA       0x1038                     break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          C:\datalogger\firmware\system\usb\usb9\usb9.c
000fe8   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         C:\datalogger\firmware\system\usb\usb9\usb9.c
000fea   0e01     MOVLW     0x1                                                                                             
000fec   6feb     MOVWF     0xeb,0x1                                                                                        
000fee   d024     BRA       0x1038                     break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
000ff0   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000ff2   0e01     MOVLW     0x1                                                                                             
000ff4   6feb     MOVWF     0xeb,0x1                                                                                        
                                                       /*                                                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                        */                                                                  C:\datalogger\firmware\system\usb\usb9\usb9.c
000ff6   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     C:\datalogger\firmware\system\usb\usb9\usb9.c
000ff8   511c     MOVF      0x1c,0x0,0x1                                                                                    
000ffa   0b0f     ANDLW     0xf                                                                                             
000ffc   0d08     MULLW     0x8                                                                                             
000ffe   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001000   6a15     CLRF      0x15,0x0                                                                                        
001002   0f00     ADDLW     0x0                                                                                             
001004   6e14     MOVWF     0x14,0x0                                                                                        
001006   0e04     MOVLW     0x4                                                                                             
001008   2215     ADDWFC    0x15,0x1,0x0                                                                                    
00100a   511c     MOVF      0x1c,0x0,0x1                                                                                    
00100c   0b80     ANDLW     0x80                                                                                            
00100e   e001     BZ        0x1012                                                                                          
001010   0e01     MOVLW     0x1                                                                                             
001012   0d04     MULLW     0x4                                                                                             
001014   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001016   0100     MOVLB     0x0                                                                                             
001018   2414     ADDWF     0x14,0x0,0x0                                                                                    
00101a   6fee     MOVWF     0xee,0x1                                                                                        
00101c   0e00     MOVLW     0x0                                                                                             
00101e   2015     ADDWFC    0x15,0x0,0x0                                                                                    
001020   6fef     MOVWF     0xef,0x1                                                                                        
001022   c0ee     MOVFF     0xee,0xfe9                 if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             C:\datalogger\firmware\system\usb\usb9\usb9.c
001024   ffe9                                                                                                               
001026   c0ef     MOVFF     0xef,0xfea                                                                                      
001028   ffea                                                                                                               
00102a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00102c   0b04     ANDLW     0x4                                                                                             
00102e   e003     BZ        0x1036                                                                                          
001030   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              C:\datalogger\firmware\system\usb\usb9\usb9.c
001032   0e01     MOVLW     0x1                                                                                             
001034   6f20     MOVWF     0x20,0x1                                                                                        
001036   d000     BRA       0x1038                     break;                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
001038   0100     MOVLB     0x0                if(ctrl_trf_session_owner == MUID_USB9)                                      C:\datalogger\firmware\system\usb\usb9\usb9.c
00103a   05eb     DECF      0xeb,0x0,0x1                                                                                    
00103c   e10a     BNZ       0x1052                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
00103e   0100     MOVLB     0x0                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                C:\datalogger\firmware\system\usb\usb9\usb9.c
001040   0e20     MOVLW     0x20                                                                                            
001042   6fec     MOVWF     0xec,0x1                                                                                        
001044   0e04     MOVLW     0x4                                                                                             
001046   6fed     MOVWF     0xed,0x1                                                                                        
001048   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           C:\datalogger\firmware\system\usb\usb9\usb9.c
00104a   93f3     BCF       0xf3,0x1,0x1                                                                                    
00104c   0100     MOVLB     0x0                    LSB(wCount) = 2;                            // Set data count            C:\datalogger\firmware\system\usb\usb9\usb9.c
00104e   0e02     MOVLW     0x2                                                                                             
001050   6ff0     MOVWF     0xf0,0x1                                                                                        
                                               }//end if(...)                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
001052   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                  requests                                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
001054   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             C:\datalogger\firmware\system\usb\usb9\usb9.c
001056   051a     DECF      0x1a,0x0,0x1                                                                                    
001058   e110     BNZ       0x107a                (SetupPkt.Recipient == RCPT_DEV))                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
00105a   5118     MOVF      0x18,0x0,0x1                                                                                    
00105c   0b1f     ANDLW     0x1f                                                                                            
00105e   0900     IORLW     0x0                                                                                             
001060   e10c     BNZ       0x107a                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
001062   0100     MOVLB     0x0                    ctrl_trf_session_owner = MUID_USB9;                                      C:\datalogger\firmware\system\usb\usb9\usb9.c
001064   0e01     MOVLW     0x1                                                                                             
001066   6feb     MOVWF     0xeb,0x1                                                                                        
001068   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
00106a   0104     MOVLB     0x4                                                                                             
00106c   5d19     SUBWF     0x19,0x0,0x1                                                                                    
00106e   e103     BNZ       0x1076                                                                                          
001070   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 1;                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
001072   81f3     BSF       0xf3,0x0,0x1                                                                                    
001074   d002     BRA       0x107a                 else                                                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
001076   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 0;                                           C:\datalogger\firmware\system\usb\usb9\usb9.c
001078   91f3     BCF       0xf3,0x0,0x1                                                                                    
                                               }//end if                                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
00107a   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
00107c   511a     MOVF      0x1a,0x0,0x1                                                                                    
00107e   e13a     BNZ       0x10f4                (SetupPkt.Recipient == RCPT_EP)&&                                         C:\datalogger\firmware\system\usb\usb9\usb9.c
001080   5118     MOVF      0x18,0x0,0x1                                                                                    
001082   0b1f     ANDLW     0x1f                                                                                            
001084   0802     SUBLW     0x2                                                                                             
001086   e136     BNZ       0x10f4                                                                                          
001088   511c     MOVF      0x1c,0x0,0x1          (SetupPkt.EPNum != 0))                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
00108a   0b0f     ANDLW     0xf                                                                                             
00108c   0900     IORLW     0x0                                                                                             
00108e   e032     BZ        0x10f4                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
001090   0100     MOVLB     0x0                    ctrl_trf_session_owner = MUID_USB9;                                      C:\datalogger\firmware\system\usb\usb9\usb9.c
001092   0e01     MOVLW     0x1                                                                                             
001094   6feb     MOVWF     0xeb,0x1                                                                                        
                                                   /* Must do address calculation here */                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
001096   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         C:\datalogger\firmware\system\usb\usb9\usb9.c
001098   511c     MOVF      0x1c,0x0,0x1                                                                                    
00109a   0b0f     ANDLW     0xf                                                                                             
00109c   0d08     MULLW     0x8                                                                                             
00109e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0010a0   6a15     CLRF      0x15,0x0                                                                                        
0010a2   0f00     ADDLW     0x0                                                                                             
0010a4   6e14     MOVWF     0x14,0x0                                                                                        
0010a6   0e04     MOVLW     0x4                                                                                             
0010a8   2215     ADDWFC    0x15,0x1,0x0                                                                                    
0010aa   511c     MOVF      0x1c,0x0,0x1                                                                                    
0010ac   0b80     ANDLW     0x80                                                                                            
0010ae   e001     BZ        0x10b2                                                                                          
0010b0   0e01     MOVLW     0x1                                                                                             
0010b2   0d04     MULLW     0x4                                                                                             
0010b4   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0010b6   0100     MOVLB     0x0                                                                                             
0010b8   2414     ADDWF     0x14,0x0,0x0                                                                                    
0010ba   6fee     MOVWF     0xee,0x1                                                                                        
0010bc   0e00     MOVLW     0x0                                                                                             
0010be   2015     ADDWFC    0x15,0x0,0x0                                                                                    
0010c0   6fef     MOVWF     0xef,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
0010c2   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
0010c4   0104     MOVLB     0x4                                                                                             
0010c6   5d19     SUBWF     0x19,0x0,0x1                                                                                    
0010c8   e107     BNZ       0x10d8                                                                                          
0010ca   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          C:\datalogger\firmware\system\usb\usb9\usb9.c
0010cc   c0ee     MOVFF     0xee,0xfe9                                                                                      
0010ce   ffe9                                                                                                               
0010d0   c0ef     MOVFF     0xef,0xfea                                                                                      
0010d2   ffea                                                                                                               
0010d4   6eef     MOVWF     0xef,0x0                                                                                        
0010d6   d00e     BRA       0x10f4                 else                                                                     C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                   {                                                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
0010d8   af1c     BTFSS     0x1c,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        C:\datalogger\firmware\system\usb\usb9\usb9.c
0010da   d006     BRA       0x10e8                                                                                          
0010dc   c0ee     MOVFF     0xee,0xfe9                     *pDst.bRam = _UCPU;                                              C:\datalogger\firmware\system\usb\usb9\usb9.c
0010de   ffe9                                                                                                               
0010e0   c0ef     MOVFF     0xef,0xfea                                                                                      
0010e2   ffea                                                                                                               
0010e4   6aef     CLRF      0xef,0x0                                                                                        
0010e6   d006     BRA       0x10f4                     else                                                                 C:\datalogger\firmware\system\usb\usb9\usb9.c
0010e8   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 C:\datalogger\firmware\system\usb\usb9\usb9.c
0010ea   c0ee     MOVFF     0xee,0xfe9                                                                                      
0010ec   ffe9                                                                                                               
0010ee   c0ef     MOVFF     0xef,0xfea                                                                                      
0010f0   ffea                                                                                                               
0010f2   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                C:\datalogger\firmware\system\usb\usb9\usb9.c
                                               }//end if                                                                    C:\datalogger\firmware\system\usb\usb9\usb9.c
0010f4   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   C:\datalogger\firmware\system\usb\usb9\usb9.c
                                                                                                                            C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  C:\datalogger\firmware\system\usb\usb9\usb9.c
                                           /*********************************************************************           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    C:\datalogger\firmware\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                C:\datalogger\firmware\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     C:\datalogger\firmware\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Naming Convention:                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  C:\datalogger\firmware\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      C:\datalogger\firmware\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   C:\datalogger\firmware\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          C:\datalogger\firmware\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               C:\datalogger\firmware\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  C:\datalogger\firmware\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               C:\datalogger\firmware\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            C:\datalogger\firmware\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Example:                                                                      C:\datalogger\firmware\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                C:\datalogger\firmware\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         C:\datalogger\firmware\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         C:\datalogger\firmware\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         C:\datalogger\firmware\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         C:\datalogger\firmware\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         C:\datalogger\firmware\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         C:\datalogger\firmware\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         C:\datalogger\firmware\autofiles\usbdsc.c
                                            * } cfg01                                                                       C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            C:\datalogger\firmware\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        C:\datalogger\firmware\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * explained for clarification.                                                  C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     C:\datalogger\firmware\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     C:\datalogger\firmware\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                C:\datalogger\firmware\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Assume the following example:                                                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     C:\datalogger\firmware\autofiles\usbdsc.c
                                            * convention:                                                                   C:\datalogger\firmware\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   C:\datalogger\firmware\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    C:\datalogger\firmware\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                C:\datalogger\firmware\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  C:\datalogger\firmware\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    C:\datalogger\firmware\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Adding a USB String                                                           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    C:\datalogger\firmware\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            C:\datalogger\firmware\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            C:\datalogger\firmware\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  C:\datalogger\firmware\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                C:\datalogger\firmware\autofiles\usbdsc.c
                                            * (Using index 02)                                                              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              C:\datalogger\firmware\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                C:\datalogger\firmware\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     C:\datalogger\firmware\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             C:\datalogger\firmware\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  C:\datalogger\firmware\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                C:\datalogger\firmware\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    C:\datalogger\firmware\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      C:\datalogger\firmware\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   C:\datalogger\firmware\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 C:\datalogger\firmware\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            C:\datalogger\firmware\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            ********************************************************************/           C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           /*********************************************************************           C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          C:\datalogger\firmware\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          C:\datalogger\firmware\autofiles\usbdsc.c
                                            *                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      C:\datalogger\firmware\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                            ********************************************************************/           C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           C:\datalogger\firmware\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          C:\datalogger\firmware\autofiles\usbdsc.c
                                           #pragma romdata                                                                  C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          C:\datalogger\firmware\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\datalogger\firmware\autofiles\usbdsc.c
                                           {                                                                                C:\datalogger\firmware\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  C:\datalogger\firmware\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x00,                   // Class Code                                        C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\datalogger\firmware\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x000C,                 // Product ID: PICDEM FS USB (DEMO Mode)             C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x0000,                 // Device release number in BCD format               C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x01,                   // Manufacturer string index                         C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x02,                   // Product string index                              C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 C:\datalogger\firmware\autofiles\usbdsc.c
                                           };                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           /* Configuration 1 Descriptor */                                                 C:\datalogger\firmware\autofiles\usbdsc.c
                                           CFG01=                                                                           C:\datalogger\firmware\autofiles\usbdsc.c
                                           {                                                                                C:\datalogger\firmware\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  C:\datalogger\firmware\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     C:\datalogger\firmware\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 C:\datalogger\firmware\autofiles\usbdsc.c
                                               1,                      // Number of interfaces in this cfg                  C:\datalogger\firmware\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 C:\datalogger\firmware\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        C:\datalogger\firmware\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 C:\datalogger\firmware\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\datalogger\firmware\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\datalogger\firmware\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\datalogger\firmware\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  C:\datalogger\firmware\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\datalogger\firmware\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x00,                   // Class code                                        C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\datalogger\firmware\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\datalogger\firmware\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   C:\datalogger\firmware\autofiles\usbdsc.c
                                           	//Mod by Tim                                                                    C:\datalogger\firmware\autofiles\usbdsc.c
                                               //sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_INT,USBGEN_EP_SIZE,32,                C:\datalogger\firmware\autofiles\usbdsc.c
                                               //sizeof(USB_EP_DSC),DSC_EP,_EP01_IN,_INT,USBGEN_EP_SIZE,32                  C:\datalogger\firmware\autofiles\usbdsc.c
                                           	                                                                                C:\datalogger\firmware\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,USBGEN_EP_SIZE,32,                 C:\datalogger\firmware\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_IN,_BULK,USBGEN_EP_SIZE,32                   C:\datalogger\firmware\autofiles\usbdsc.c
                                           	//end mod by Tim                                                                C:\datalogger\firmware\autofiles\usbdsc.c
                                           };                                                                               C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\datalogger\firmware\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd001={                   C:\datalogger\firmware\autofiles\usbdsc.c
                                           sizeof(sd001),DSC_STR,                                                           C:\datalogger\firmware\autofiles\usbdsc.c
                                           'M','i','c','r','o','c','h','i','p',' ',                                         C:\datalogger\firmware\autofiles\usbdsc.c
                                           'T','e','c','h','n','o','l','o','g','y',' ','I','n','c','.'};                    C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[33];}sd002={                   C:\datalogger\firmware\autofiles\usbdsc.c
                                           sizeof(sd002),DSC_STR,                                                           C:\datalogger\firmware\autofiles\usbdsc.c
                                           'P','I','C','D','E','M',' ','F','S',' ','U','S','B',' ',                         C:\datalogger\firmware\autofiles\usbdsc.c
                                           'D','e','m','o',' ','B','o','a','r','d',' ','(','C',')',                         C:\datalogger\firmware\autofiles\usbdsc.c
                                           ' ','2','0','0','4'};                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_CD_Ptr[]={&cfg01,&cfg01};                       C:\datalogger\firmware\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};                C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           #pragma code                                                                     C:\datalogger\firmware\autofiles\usbdsc.c
                                                                                                                            C:\datalogger\firmware\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           C:\datalogger\firmware\autofiles\usbdsc.c
                                           /*********************************************************************           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the Company) for its PICmicro Microcontroller is intended and             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Companys customer, for use solely and                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN AS IS CONDITION. NO WARRANTIES,             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code                                                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0010f6   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0010f8   e002     BZ        0x10fe                                                                                          
0010fa   0e00     MOVLW     0x0                                                                                             
0010fc   d001     BRA       0x1100                                                                                          
0010fe   0e01     MOVLW     0x1                                                                                             
001100   0900     IORLW     0x0                                                                                             
001102   e00b     BZ        0x111a                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001104   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001106   5100     MOVF      0x0,0x0,0x1                                                                                     
001108   0b3c     ANDLW     0x3c                                                                                            
00110a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00110c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00110e   080d     SUBLW     0xd                                                                                             
001110   e102     BNZ       0x1116                                                                                          
001112   d80c     RCALL     0x112c                     USBCtrlTrfSetupHandler();                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001114   d001     BRA       0x1118                 else                                        // EP0 OUT                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001116   d81c     RCALL     0x1150                     USBCtrlTrfOutHandler();                                              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001118   d008     BRA       0x112a             else if(USTAT == EP00_IN)                       // EP0 IN                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00111a   506c     MOVF      0x6c,0x0,0x0                                                                                    
00111c   e002     BZ        0x1122                                                                                          
00111e   0e00     MOVLW     0x0                                                                                             
001120   d001     BRA       0x1124                                                                                          
001122   0e01     MOVLW     0x1                                                                                             
001124   0904     IORLW     0x4                                                                                             
001126   e001     BZ        0x112a                                                                                          
001128   d823     RCALL     0x1170                 USBCtrlTrfInHandler();                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00112a   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00112c   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00112e   ffe6                                                                                                               
001130   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001132   ffd9                                                                                                               
001134   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001136   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001138   6bea     CLRF      0xea,0x1                                                                                        
00113a   6beb     CLRF      0xeb,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00113c   6bf0     CLRF      0xf0,0x1           wCount._word = 0;                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00113e   6bf1     CLRF      0xf1,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001140   ecf7     CALL      0xdee,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001142   f006                                                                                                               
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Modifiable Section */                                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               // Insert other USB Device Class Request Handlers here                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /* End Modifiable Section */                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001144   d8dd     RCALL     0x1300             USBCtrlEPServiceComplete();                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001146   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001148   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00114a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00114c   ffd9                                                                                                               
00114e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001150   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001152   0100     MOVLB     0x0                                                                                             
001154   5dea     SUBWF     0xea,0x0,0x1                                                                                    
001156   e10a     BNZ       0x116c                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001158   d896     RCALL     0x1286                 USBCtrlTrfRxService();                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00115a   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00115c   bd00     BTFSC     0x0,0x6,0x1                                                                                     
00115e   d003     BRA       0x1166                                                                                          
001160   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001162   6f00     MOVWF     0x0,0x1                                                                                         
001164   d002     BRA       0x116a                 else                                                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001166   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001168   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00116a   d001     BRA       0x116e             else    // CTRL_TRF_TX                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00116c   d90f     RCALL     0x138c                 USBPrepareForNextSetupTrf();                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00116e   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001170   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001172   0100     MOVLB     0x0                                                                                             
001174   5df2     SUBWF     0xf2,0x0,0x1                                                                                    
001176   e10a     BNZ       0x118c                                                                                          
001178   c41a     MOVFF     0x41a,0xf6e                                                                                     
00117a   ff6e                                                                                                               
00117c   506e     MOVF      0x6e,0x0,0x0                                                                                    
00117e   0800     SUBLW     0x0                                                                                             
001180   e203     BC        0x1188                                                                                          
001182   0e05     MOVLW     0x5                                                                                             
001184   6ff2     MOVWF     0xf2,0x1                                                                                        
001186   d002     BRA       0x118c                                                                                          
001188   0e03     MOVLW     0x3                                                                                             
00118a   6ff2     MOVWF     0xf2,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00118c   0100     MOVLB     0x0                if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00118e   05ea     DECF      0xea,0x0,0x1                                                                                    
001190   e10a     BNZ       0x11a6                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001192   d80b     RCALL     0x11aa                 USBCtrlTrfTxService();                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001194   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001196   bd04     BTFSC     0x4,0x6,0x1                                                                                     
001198   d003     BRA       0x11a0                                                                                          
00119a   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00119c   6f04     MOVWF     0x4,0x1                                                                                         
00119e   d002     BRA       0x11a4                 else                                                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011a0   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011a2   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011a4   d001     BRA       0x11a8             else // CTRL_TRF_RX                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011a6   d8f2     RCALL     0x138c                 USBPrepareForNextSetupTrf();                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011a8   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011aa   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011ac   ffe6                                                                                                               
0011ae   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0011b0   ffd9                                                                                                               
0011b2   0e02     MOVLW     0x2                                                                                             
0011b4   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011b6   0100     MOVLB     0x0                if(wCount._word < EP0_BUFF_SIZE)                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011b8   0e08     MOVLW     0x8                                                                                             
0011ba   5df0     SUBWF     0xf0,0x0,0x1                                                                                    
0011bc   0e00     MOVLW     0x0                                                                                             
0011be   59f1     SUBWFB    0xf1,0x0,0x1                                                                                    
0011c0   e205     BC        0x11cc                                                                                          
0011c2   c0f0     MOVFF     0xf0,0xfde             byte_to_send._word = wCount._word;                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011c4   ffde                                                                                                               
0011c6   c0f1     MOVFF     0xf1,0xfdd                                                                                      
0011c8   ffdd                                                                                                               
0011ca   d003     BRA       0x11d2             else                                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011cc   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011ce   6ede     MOVWF     0xde,0x0                                                                                        
0011d0   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011d2   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011d4   9304     BCF       0x4,0x1,0x1                                                                                     
0011d6   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011d8   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011da   50db     MOVF      0xdb,0x0,0x0                                                                                    
0011dc   1304     IORWF     0x4,0x1,0x1                                                                                     
0011de   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011e0   f405                                                                                                               
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011e2   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011e4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0011e6   0100     MOVLB     0x0                                                                                             
0011e8   5ff0     SUBWF     0xf0,0x1,0x1                                                                                    
0011ea   0e01     MOVLW     0x1                                                                                             
0011ec   50db     MOVF      0xdb,0x0,0x0                                                                                    
0011ee   5bf1     SUBWFB    0xf1,0x1,0x1                                                                                    
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011f0   0e20     MOVLW     0x20               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011f2   6fee     MOVWF     0xee,0x1                                                                                        
0011f4   0e04     MOVLW     0x4                                                                                             
0011f6   6fef     MOVWF     0xef,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011f8   0100     MOVLB     0x0                if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011fa   a3f3     BTFSS     0xf3,0x1,0x1                                                                                    
0011fc   d01e     BRA       0x123a                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0011fe   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001200   ffe9                                                                                                               
001202   cfda     MOVFF     0xfda,0xfea                                                                                     
001204   ffea                                                                                                               
001206   50ee     MOVF      0xee,0x0,0x0                                                                                    
001208   10ed     IORWF     0xed,0x0,0x0                                                                                    
00120a   e016     BZ        0x1238                                                                                          
001236   d7e3     BRA       0x11fe                                                                                          
                                                   {                                                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00120c   c0ec     MOVFF     0xec,0xff6                 *pDst.bRam = *pSrc.bRom;                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00120e   fff6                                                                                                               
001210   c0ed     MOVFF     0xed,0xff7                                                                                      
001212   fff7                                                                                                               
001214   0008     TBLRD                                                                                                     
001216   50f5     MOVF      0xf5,0x0,0x0                                                                                    
001218   c0ee     MOVFF     0xee,0xfe9                                                                                      
00121a   ffe9                                                                                                               
00121c   c0ef     MOVFF     0xef,0xfea                                                                                      
00121e   ffea                                                                                                               
001220   6eef     MOVWF     0xef,0x0                                                                                        
001222   0100     MOVLB     0x0                        pDst.bRam++;                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001224   2bee     INCF      0xee,0x1,0x1                                                                                    
001226   0e00     MOVLW     0x0                                                                                             
001228   23ef     ADDWFC    0xef,0x1,0x1                                                                                    
00122a   2bec     INCF      0xec,0x1,0x1               pSrc.bRom++;                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00122c   23ed     ADDWFC    0xed,0x1,0x1                                                                                    
00122e   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001230   0e01     MOVLW     0x1                                                                                             
001232   e201     BC        0x1236                                                                                          
001234   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001238   d01c     BRA       0x1272             else // RAM                                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00123a   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00123c   ffe9                                                                                                               
00123e   cfda     MOVFF     0xfda,0xfea                                                                                     
001240   ffea                                                                                                               
001242   50ee     MOVF      0xee,0x0,0x0                                                                                    
001244   10ed     IORWF     0xed,0x0,0x0                                                                                    
001246   e015     BZ        0x1272                                                                                          
001270   d7e4     BRA       0x123a                                                                                          
                                                   {                                                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001248   c0ec     MOVFF     0xec,0xfe9                 *pDst.bRam = *pSrc.bRam;                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00124a   ffe9                                                                                                               
00124c   c0ed     MOVFF     0xed,0xfea                                                                                      
00124e   ffea                                                                                                               
001250   50ef     MOVF      0xef,0x0,0x0                                                                                    
001252   c0ee     MOVFF     0xee,0xfe9                                                                                      
001254   ffe9                                                                                                               
001256   c0ef     MOVFF     0xef,0xfea                                                                                      
001258   ffea                                                                                                               
00125a   6eef     MOVWF     0xef,0x0                                                                                        
00125c   0100     MOVLB     0x0                        pDst.bRam++;                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00125e   2bee     INCF      0xee,0x1,0x1                                                                                    
001260   0e00     MOVLW     0x0                                                                                             
001262   23ef     ADDWFC    0xef,0x1,0x1                                                                                    
001264   2bec     INCF      0xec,0x1,0x1               pSrc.bRam++;                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001266   23ed     ADDWFC    0xed,0x1,0x1                                                                                    
001268   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00126a   0e01     MOVLW     0x1                                                                                             
00126c   e201     BC        0x1270                                                                                          
00126e   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001272   0e02     MOVLW     0x2            }//end USBCtrlTrfTxService                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001274   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001276   e202     BC        0x127c                                                                                          
001278   6ae1     CLRF      0xe1,0x0                                                                                        
00127a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00127c   6ee1     MOVWF     0xe1,0x0                                                                                        
00127e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001280   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001282   ffd9                                                                                                               
001284   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001286   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001288   ffe6                                                                                                               
00128a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00128c   ffd9                                                                                                               
00128e   0e02     MOVLW     0x2                                                                                             
001290   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001292   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001294   0104     MOVLB     0x4                                                                                             
001296   1500     ANDWF     0x0,0x0,0x1                                                                                     
001298   6ee7     MOVWF     0xe7,0x0                                                                                        
00129a   0e01     MOVLW     0x1                                                                                             
00129c   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00129e   ffdb                                                                                                               
0012a0   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012a2   ffdf                                                                                                               
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012a4   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012a6   0100     MOVLB     0x0                                                                                             
0012a8   27f0     ADDWF     0xf0,0x1,0x1                                                                                    
0012aa   50dd     MOVF      0xdd,0x0,0x0                                                                                    
0012ac   23f1     ADDWFC    0xf1,0x1,0x1                                                                                    
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012ae   0e20     MOVLW     0x20               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012b0   6fec     MOVWF     0xec,0x1                                                                                        
0012b2   0e04     MOVLW     0x4                                                                                             
0012b4   6fed     MOVWF     0xed,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012b6   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012b8   ffe9                                                                                                               
0012ba   cfda     MOVFF     0xfda,0xfea                                                                                     
0012bc   ffea                                                                                                               
0012be   50ee     MOVF      0xee,0x0,0x0                                                                                    
0012c0   10ed     IORWF     0xed,0x0,0x0                                                                                    
0012c2   e014     BZ        0x12ec                                                                                          
0012ea   d7e5     BRA       0x12b6                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012c4   c0ec     MOVFF     0xec,0xfe9             *pDst.bRam = *pSrc.bRam;                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012c6   ffe9                                                                                                               
0012c8   c0ed     MOVFF     0xed,0xfea                                                                                      
0012ca   ffea                                                                                                               
0012cc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0012ce   c0ee     MOVFF     0xee,0xfe9                                                                                      
0012d0   ffe9                                                                                                               
0012d2   c0ef     MOVFF     0xef,0xfea                                                                                      
0012d4   ffea                                                                                                               
0012d6   6eef     MOVWF     0xef,0x0                                                                                        
0012d8   2bee     INCF      0xee,0x1,0x1           pDst.bRam++;                                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012da   0e00     MOVLW     0x0                                                                                             
0012dc   23ef     ADDWFC    0xef,0x1,0x1                                                                                    
0012de   2bec     INCF      0xec,0x1,0x1           pSrc.bRam++;                                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012e0   23ed     ADDWFC    0xed,0x1,0x1                                                                                    
0012e2   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012e4   0e01     MOVLW     0x1                                                                                             
0012e6   e201     BC        0x12ea                                                                                          
0012e8   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012ec   0e02     MOVLW     0x2            }//end USBCtrlTrfRxService                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0012ee   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0012f0   e202     BC        0x12f6                                                                                          
0012f2   6ae1     CLRF      0xe1,0x0                                                                                        
0012f4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012f6   6ee1     MOVWF     0xe1,0x0                                                                                        
0012f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012fa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0012fc   ffd9                                                                                                               
0012fe   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001300   0100     MOVLB     0x0                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001302   51eb     MOVF      0xeb,0x0,0x1                                                                                    
001304   e10c     BNZ       0x131e                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001306   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001308   0e08     MOVLW     0x8                                                                                             
00130a   6f01     MOVWF     0x1,0x1                                                                                         
00130c   0e18     MOVLW     0x18                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00130e   6f02     MOVWF     0x2,0x1                                                                                         
001310   0e04     MOVLW     0x4                                                                                             
001312   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001314   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001316   6f00     MOVWF     0x0,0x1                                                                                         
001318   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00131a   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00131c   d035     BRA       0x1388             else    // A module has claimed ownership of the control transfer session.   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00131e   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001320   af18     BTFSS     0x18,0x7,0x1                                                                                    
001322   d022     BRA       0x1368                                                                                          
                                                   {                                                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001324   0100     MOVLB     0x0                        if(SetupPkt.wLength < wCount._word)                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001326   51f0     MOVF      0xf0,0x0,0x1                                                                                    
001328   0104     MOVLB     0x4                                                                                             
00132a   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
00132c   0100     MOVLB     0x0                                                                                             
00132e   51f1     MOVF      0xf1,0x0,0x1                                                                                    
001330   0104     MOVLB     0x4                                                                                             
001332   591f     SUBWFB    0x1f,0x0,0x1                                                                                    
001334   e204     BC        0x133e                                                                                          
001336   c41e     MOVFF     0x41e,0xf0                     wCount._word = SetupPkt.wLength;                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001338   f0f0                                                                                                               
00133a   c41f     MOVFF     0x41f,0xf1                                                                                      
00133c   f0f1                                                                                                               
00133e   df35     RCALL     0x11aa                     USBCtrlTrfTxService();                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001340   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001342   0e01     MOVLW     0x1                                                                                             
001344   6fea     MOVWF     0xea,0x1                                                                                        
                                                       /*                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001346   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001348   0e08     MOVLW     0x8                                                                                             
00134a   6f01     MOVWF     0x1,0x1                                                                                         
00134c   0e18     MOVLW     0x18                       ep0Bo.ADR = (byte*)&SetupPkt;                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00134e   6f02     MOVWF     0x2,0x1                                                                                         
001350   0e04     MOVLW     0x4                                                                                             
001352   6f03     MOVWF     0x3,0x1                                                                                         
001354   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001356   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001358   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00135a   0e20     MOVLW     0x20                                                                                            
00135c   6f06     MOVWF     0x6,0x1                                                                                         
00135e   0e04     MOVLW     0x4                                                                                             
001360   6f07     MOVWF     0x7,0x1                                                                                         
001362   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001364   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001366   d010     BRA       0x1388                 else    // (SetupPkt.DataDir == HOST_TO_DEV)                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001368   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00136a   0e02     MOVLW     0x2                                                                                             
00136c   6fea     MOVWF     0xea,0x1                                                                                        
                                                       /*                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00136e   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001370   6b05     CLRF      0x5,0x1                                                                                         
001372   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001374   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001376   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001378   0e08     MOVLW     0x8                                                                                             
00137a   6f01     MOVWF     0x1,0x1                                                                                         
00137c   0e20     MOVLW     0x20                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00137e   6f02     MOVWF     0x2,0x1                                                                                         
001380   0e04     MOVLW     0x4                                                                                             
001382   6f03     MOVWF     0x3,0x1                                                                                         
001384   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001386   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001388   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00138a   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00138c   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
00138e   6bea     CLRF      0xea,0x1                                                                                        
001390   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001392   0e08     MOVLW     0x8                                                                                             
001394   6f01     MOVWF     0x1,0x1                                                                                         
001396   0e18     MOVLW     0x18               ep0Bo.ADR = (byte*)&SetupPkt;                                                C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
001398   6f02     MOVWF     0x2,0x1                                                                                         
00139a   0e04     MOVLW     0x4                                                                                             
00139c   6f03     MOVWF     0x3,0x1                                                                                         
00139e   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0013a0   6f00     MOVWF     0x0,0x1                                                                                         
0013a2   0104     MOVLB     0x4                ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
0013a4   6b04     CLRF      0x4,0x1                                                                                         
0013a6   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\datalogger\firmware\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\datalogger\firmware\user\user.c
                                           #include <p18cxxx.h>                                                             C:\datalogger\firmware\user\user.c
                                           #include <usart.h>                                                               C:\datalogger\firmware\user\user.c
                                           #include <timers.h>                                                              C:\datalogger\firmware\user\user.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           #include "io_cfg.h"             // I/O pin mapping                               C:\datalogger\firmware\user\user.c
                                           #include "user\user.h"                                                           C:\datalogger\firmware\user\user.c
                                           #include "logic\logic.h"                                                         C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           /** V A R I A B L E S ********************************************************/  C:\datalogger\firmware\user\user.c
                                           #pragma udata                                                                    C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           byte counter;                                                                    C:\datalogger\firmware\user\user.c
                                           byte trf_state;                                                                  C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           DATA_PACKET dataPacket;                                                          C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           byte pTemp;                     // Pointer to current logging position, will     C:\datalogger\firmware\user\user.c
                                                                           // loop to zero once the max index is reached    C:\datalogger\firmware\user\user.c
                                           byte valid_temp;                // Keeps count of the valid data points          C:\datalogger\firmware\user\user.c
                                           word temp_data[30];             // 30 points of data                             C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           // Timer0 - 1 second interval setup.                                             C:\datalogger\firmware\user\user.c
                                           // Fosc/4 = 12MHz                                                                C:\datalogger\firmware\user\user.c
                                           // Use /256 prescalar, this brings counter freq down to 46,875 Hz                C:\datalogger\firmware\user\user.c
                                           // Timer0 should = 65536 - 46875 = 18661 or 0x48E5                               C:\datalogger\firmware\user\user.c
                                           #define TIMER0L_VAL         0xE5                                                 C:\datalogger\firmware\user\user.c
                                           #define TIMER0H_VAL         0x48                                                 C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           void BlinkUSBStatus(void);                                                       C:\datalogger\firmware\user\user.c
                                           void ServiceRequests(void);                                                      C:\datalogger\firmware\user\user.c
                                           void ResetTempLog(void);                                                         C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           //UCAM                                                                           C:\datalogger\firmware\user\user.c
                                           byte ReadPOT(void);                                                              C:\datalogger\firmware\user\user.c
                                           void Blink(byte);                                                                C:\datalogger\firmware\user\user.c
                                           void nullSampler(void);                                                          C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\datalogger\firmware\user\user.c
                                           #pragma code                                                                     C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           void ProcessIO(void)                                                             C:\datalogger\firmware\user\user.c
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                               //BlinkUSBStatus();                                                          C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                               // User Application USB tasks                                                C:\datalogger\firmware\user\user.c
000838   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\datalogger\firmware\user\user.c
00083a   0100     MOVLB     0x0                                                                                             
00083c   5df2     SUBWF     0xf2,0x0,0x1                                                                                    
00083e   e303     BNC       0x846                                                                                           
000840   506d     MOVF      0x6d,0x0,0x0                                                                                    
000842   0b02     ANDLW     0x2                                                                                             
000844   e001     BZ        0x848                                                                                           
000846   d001     BRA       0x84a                                                                                           
                                                                                                                            C:\datalogger\firmware\user\user.c
                                               //UCAM                                                                       C:\datalogger\firmware\user\user.c
000848   d801     RCALL     0x84c              ServiceRequests();                                                           C:\datalogger\firmware\user\user.c
00084a   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
00084c   cfd9     MOVFF     0xfd9,0xfe6    void ServiceRequests(void)                                                       C:\datalogger\firmware\user\user.c
00084e   ffe6                                                                                                               
000850   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000852   ffd9                                                                                                               
000854   0e07     MOVLW     0x7                                                                                             
000856   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                               byte index;                                                                  C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
000858   0e01     MOVLW     0x1            	int i = 0;                                                                      C:\datalogger\firmware\user\user.c
00085a   6adb     CLRF      0xdb,0x0                                                                                        
00085c   0e02     MOVLW     0x2                                                                                             
00085e   6adb     CLRF      0xdb,0x0                                                                                        
000860   0e03     MOVLW     0x3            	int q = 0;                                                                      C:\datalogger\firmware\user\user.c
000862   6adb     CLRF      0xdb,0x0                                                                                        
000864   0e04     MOVLW     0x4                                                                                             
000866   6adb     CLRF      0xdb,0x0                                                                                        
000868   0e05     MOVLW     0x5            	int temp = 0;                                                                   C:\datalogger\firmware\user\user.c
00086a   6adb     CLRF      0xdb,0x0                                                                                        
00086c   0e06     MOVLW     0x6                                                                                             
00086e   6adb     CLRF      0xdb,0x0                                                                                        
                                                                                                                            C:\datalogger\firmware\user\user.c
000870   0e40     MOVLW     0x40               if(USBGenRead((byte*)&dataPacket,sizeof(dataPacket)))                        C:\datalogger\firmware\user\user.c
000872   6ee6     MOVWF     0xe6,0x0                                                                                        
000874   0e62     MOVLW     0x62                                                                                            
000876   6ee6     MOVWF     0xe6,0x0                                                                                        
000878   0e00     MOVLW     0x0                                                                                             
00087a   6ee6     MOVWF     0xe6,0x0                                                                                        
00087c   ecda     CALL      0x15b4,0x0                                                                                      
00087e   f00a                                                                                                               
000880   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000882   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000884   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000886   0900     IORLW     0x0                                                                                             
000888   e101     BNZ       0x88c                                                                                           
00088a   d08f     BRA       0x9aa                                                                                           
                                               {                                                                            C:\datalogger\firmware\user\user.c
00088c   0100     MOVLB     0x0                    counter = 0;                                                             C:\datalogger\firmware\user\user.c
00088e   6b60     CLRF      0x60,0x1                                                                                        
000890   0100     MOVLB     0x0                    switch(dataPacket.CMD)                                                   C:\datalogger\firmware\user\user.c
000892   5162     MOVF      0x62,0x0,0x1                                                                                    
000894   0aff     XORLW     0xff                                                                                            
000896   e075     BZ        0x982                                                                                           
000898   0a12     XORLW     0x12                                                                                            
00089a   e06c     BZ        0x974                                                                                           
00089c   0a03     XORLW     0x3                                                                                             
00089e   e065     BZ        0x96a                                                                                           
0008a0   0adc     XORLW     0xdc                                                                                            
0008a2   e02e     BZ        0x900                                                                                           
0008a4   0a03     XORLW     0x3                                                                                             
0008a6   e00c     BZ        0x8c0                                                                                           
0008a8   0a31     XORLW     0x31                                                                                            
0008aa   e001     BZ        0x8ae                                                                                           
0008ac   d06c     BRA       0x986                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
                                                       case READ_VERSION:                                                   C:\datalogger\firmware\user\user.c
                                                           //dataPacket._byte[1] is len                                     C:\datalogger\firmware\user\user.c
0008ae   0100     MOVLB     0x0                            dataPacket._byte[2] = MINOR_VERSION;                             C:\datalogger\firmware\user\user.c
0008b0   6b64     CLRF      0x64,0x1                                                                                        
0008b2   0100     MOVLB     0x0                            dataPacket._byte[3] = MAJOR_VERSION;                             C:\datalogger\firmware\user\user.c
0008b4   0e01     MOVLW     0x1                                                                                             
0008b6   6f65     MOVWF     0x65,0x1                                                                                        
0008b8   0100     MOVLB     0x0                            counter=0x04;                                                    C:\datalogger\firmware\user\user.c
0008ba   0e04     MOVLW     0x4                                                                                             
0008bc   6f60     MOVWF     0x60,0x1                                                                                        
0008be   d064     BRA       0x988                          break;                                                           C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                       case ID_BOARD:                                                       C:\datalogger\firmware\user\user.c
0008c0   0100     MOVLB     0x0                            counter = 0x01;                                                  C:\datalogger\firmware\user\user.c
0008c2   0e01     MOVLW     0x1                                                                                             
0008c4   6f60     MOVWF     0x60,0x1                                                                                        
0008c6   0100     MOVLB     0x0                            if(dataPacket.ID == 0)                                           C:\datalogger\firmware\user\user.c
0008c8   5163     MOVF      0x63,0x0,0x1                                                                                    
0008ca   e103     BNZ       0x8d2                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
0008cc   948c     BCF       0x8c,0x2,0x0                       mLED_3_Off();mLED_4_Off();                                   C:\datalogger\firmware\user\user.c
0008ce   968c     BCF       0x8c,0x3,0x0                                                                                    
                                                           }                                                                C:\datalogger\firmware\user\user.c
0008d0   d016     BRA       0x8fe                          else if(dataPacket.ID == 1)                                      C:\datalogger\firmware\user\user.c
0008d2   0100     MOVLB     0x0                                                                                             
0008d4   0563     DECF      0x63,0x0,0x1                                                                                    
0008d6   e103     BNZ       0x8de                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
0008d8   948c     BCF       0x8c,0x2,0x0                       mLED_3_Off();mLED_4_On();                                    C:\datalogger\firmware\user\user.c
0008da   868c     BSF       0x8c,0x3,0x0                                                                                    
                                                           }                                                                C:\datalogger\firmware\user\user.c
0008dc   d010     BRA       0x8fe                          else if(dataPacket.ID == 2)                                      C:\datalogger\firmware\user\user.c
0008de   0e02     MOVLW     0x2                                                                                             
0008e0   0100     MOVLB     0x0                                                                                             
0008e2   5d63     SUBWF     0x63,0x0,0x1                                                                                    
0008e4   e103     BNZ       0x8ec                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
0008e6   848c     BSF       0x8c,0x2,0x0                       mLED_3_On();mLED_4_Off();                                    C:\datalogger\firmware\user\user.c
0008e8   968c     BCF       0x8c,0x3,0x0                                                                                    
                                                           }                                                                C:\datalogger\firmware\user\user.c
0008ea   d009     BRA       0x8fe                          else if(dataPacket.ID == 3)                                      C:\datalogger\firmware\user\user.c
0008ec   0e03     MOVLW     0x3                                                                                             
0008ee   0100     MOVLB     0x0                                                                                             
0008f0   5d63     SUBWF     0x63,0x0,0x1                                                                                    
0008f2   e103     BNZ       0x8fa                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
0008f4   848c     BSF       0x8c,0x2,0x0                       mLED_3_On();mLED_4_On();                                     C:\datalogger\firmware\user\user.c
0008f6   868c     BSF       0x8c,0x3,0x0                                                                                    
                                                           }                                                                C:\datalogger\firmware\user\user.c
0008f8   d002     BRA       0x8fe                          else                                                             C:\datalogger\firmware\user\user.c
0008fa   0100     MOVLB     0x0                                counter = 0x00;                                              C:\datalogger\firmware\user\user.c
0008fc   6b60     CLRF      0x60,0x1                                                                                        
0008fe   d044     BRA       0x988                          break;                                                           C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                       case UPDATE_LED:                                                     C:\datalogger\firmware\user\user.c
                                                           // LED1 & LED2 were used as USB event indicators.                C:\datalogger\firmware\user\user.c
000900   0100     MOVLB     0x0                            if(dataPacket.led_num == 1)                                      C:\datalogger\firmware\user\user.c
000902   0563     DECF      0x63,0x0,0x1                                                                                    
000904   e109     BNZ       0x918                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
000906   0100     MOVLB     0x0                                mLED_1 = dataPacket.led_status;                              C:\datalogger\firmware\user\user.c
000908   5164     MOVF      0x64,0x0,0x1                                                                                    
00090a   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
00090c   808c     BSF       0x8c,0x0,0x0                                                                                    
00090e   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
000910   908c     BCF       0x8c,0x0,0x0                                                                                    
000912   0100     MOVLB     0x0                                counter = 0x01;                                              C:\datalogger\firmware\user\user.c
000914   0e01     MOVLW     0x1                                                                                             
000916   6f60     MOVWF     0x60,0x1                                                                                        
                                                           }                                                                C:\datalogger\firmware\user\user.c
000918   0e02     MOVLW     0x2                            if(dataPacket.led_num == 2)                                      C:\datalogger\firmware\user\user.c
00091a   0100     MOVLB     0x0                                                                                             
00091c   5d63     SUBWF     0x63,0x0,0x1                                                                                    
00091e   e109     BNZ       0x932                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
000920   0100     MOVLB     0x0                                mLED_2 = dataPacket.led_status;                              C:\datalogger\firmware\user\user.c
000922   5164     MOVF      0x64,0x0,0x1                                                                                    
000924   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
000926   828c     BSF       0x8c,0x1,0x0                                                                                    
000928   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
00092a   928c     BCF       0x8c,0x1,0x0                                                                                    
00092c   0100     MOVLB     0x0                                counter = 0x01;                                              C:\datalogger\firmware\user\user.c
00092e   0e01     MOVLW     0x1                                                                                             
000930   6f60     MOVWF     0x60,0x1                                                                                        
                                                           }                                                                C:\datalogger\firmware\user\user.c
000932   0e03     MOVLW     0x3                            if(dataPacket.led_num == 3)                                      C:\datalogger\firmware\user\user.c
000934   0100     MOVLB     0x0                                                                                             
000936   5d63     SUBWF     0x63,0x0,0x1                                                                                    
000938   e10a     BNZ       0x94e                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
00093a   0100     MOVLB     0x0                                mLED_3 = dataPacket.led_status;                              C:\datalogger\firmware\user\user.c
00093c   5164     MOVF      0x64,0x0,0x1                                                                                    
00093e   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
000940   848c     BSF       0x8c,0x2,0x0                                                                                    
000942   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
000944   948c     BCF       0x8c,0x2,0x0                                                                                    
000946   0100     MOVLB     0x0                                counter = 0x01;                                              C:\datalogger\firmware\user\user.c
000948   0e01     MOVLW     0x1                                                                                             
00094a   6f60     MOVWF     0x60,0x1                                                                                        
                                                           }                                                                C:\datalogger\firmware\user\user.c
00094c   d00d     BRA       0x968                          else if(dataPacket.led_num == 4)                                 C:\datalogger\firmware\user\user.c
00094e   0e04     MOVLW     0x4                                                                                             
000950   0100     MOVLB     0x0                                                                                             
000952   5d63     SUBWF     0x63,0x0,0x1                                                                                    
000954   e109     BNZ       0x968                                                                                           
                                                           {                                                                C:\datalogger\firmware\user\user.c
000956   0100     MOVLB     0x0                                mLED_4 = dataPacket.led_status;                              C:\datalogger\firmware\user\user.c
000958   5164     MOVF      0x64,0x0,0x1                                                                                    
00095a   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
00095c   868c     BSF       0x8c,0x3,0x0                                                                                    
00095e   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
000960   968c     BCF       0x8c,0x3,0x0                                                                                    
000962   0100     MOVLB     0x0                                counter = 0x01;                                              C:\datalogger\firmware\user\user.c
000964   0e01     MOVLW     0x1                                                                                             
000966   6f60     MOVWF     0x60,0x1                                                                                        
                                                           }                                                                C:\datalogger\firmware\user\user.c
000968   d00f     BRA       0x988                          break;                                                           C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                       //UCAM                                                               C:\datalogger\firmware\user\user.c
                                                       case BLINK_LED_COMMAND: //[0xEE, Onstate]                            C:\datalogger\firmware\user\user.c
                                                       	//Return the sum of the numbers, note no overflow protection present, to keep simplicity. C:\datalogger\firmware\user\user.c
                                                           //Blink(dataPacket._byte[1]);                                    C:\datalogger\firmware\user\user.c
00096a   d8a8     RCALL     0xabc          				nullSampler();                                                               C:\datalogger\firmware\user\user.c
00096c   0100     MOVLB     0x0                            counter=0x02; //sends back same command                          C:\datalogger\firmware\user\user.c
00096e   0e02     MOVLW     0x2                                                                                             
000970   6f60     MOVWF     0x60,0x1                                                                                        
000972   d00a     BRA       0x988                          break;                                                           C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                      	//UCAM                                                               C:\datalogger\firmware\user\user.c
                                                      	case GET_ADC_COMMAND: //[0xED. 8-bit data]                           C:\datalogger\firmware\user\user.c
                                                           //dataPacket._byte[1] = ReadPOT();                               C:\datalogger\firmware\user\user.c
000974   0100     MOVLB     0x0            				dataPacket._byte[1] = 0x2A;                                                  C:\datalogger\firmware\user\user.c
000976   0e2a     MOVLW     0x2a                                                                                            
000978   6f63     MOVWF     0x63,0x1                                                                                        
00097a   0100     MOVLB     0x0                            counter=0x02; //returns[0xED, command]                           C:\datalogger\firmware\user\user.c
00097c   0e02     MOVLW     0x2                                                                                             
00097e   6f60     MOVWF     0x60,0x1                                                                                        
000980   d003     BRA       0x988                          break;                                                           C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                       case RESET:                                                          C:\datalogger\firmware\user\user.c
000982   00ff     RESET                                    Reset();                                                         C:\datalogger\firmware\user\user.c
000984   d001     BRA       0x988                          break;                                                           C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                       default:                                                             C:\datalogger\firmware\user\user.c
000986   d000     BRA       0x988                          break;                                                           C:\datalogger\firmware\user\user.c
                                                   }                                                                        C:\datalogger\firmware\user\user.c
000988   0100     MOVLB     0x0                    if(counter != 0)                                                         C:\datalogger\firmware\user\user.c
00098a   5160     MOVF      0x60,0x0,0x1                                                                                    
00098c   e00e     BZ        0x9aa                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
00098e   0104     MOVLB     0x4                        if(!mUSBGenTxIsBusy())                                               C:\datalogger\firmware\user\user.c
000990   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
000992   d00b     BRA       0x9aa                                                                                           
000994   c060     MOVFF     0x60,0xfe6                     USBGenWrite((byte*)&dataPacket,counter);                         C:\datalogger\firmware\user\user.c
000996   ffe6                                                                                                               
000998   0e62     MOVLW     0x62                                                                                            
00099a   6ee6     MOVWF     0xe6,0x0                                                                                        
00099c   0e00     MOVLW     0x0                                                                                             
00099e   6ee6     MOVWF     0xe6,0x0                                                                                        
0009a0   eca0     CALL      0x1540,0x0                                                                                      
0009a2   f00a                                                                                                               
0009a4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009a8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                   }                                                                        C:\datalogger\firmware\user\user.c
                                               }                                                                            C:\datalogger\firmware\user\user.c
0009aa   d000     BRA       0x9ac          return;                                                                          C:\datalogger\firmware\user\user.c
0009ac   0e07     MOVLW     0x7            }                                                                                C:\datalogger\firmware\user\user.c
0009ae   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0009b0   e202     BC        0x9b6                                                                                           
0009b2   6ae1     CLRF      0xe1,0x0                                                                                        
0009b4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009b6   6ee1     MOVWF     0xe1,0x0                                                                                        
0009b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009ba   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0009bc   ffd9                                                                                                               
0009be   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           void BlinkUSBStatus(void)                                                        C:\datalogger\firmware\user\user.c
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                               static word led_count=0;                                                     C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
0009c0   0100     MOVLB     0x0                if(led_count == 0)led_count = 10000U;                                        C:\datalogger\firmware\user\user.c
0009c2   51f8     MOVF      0xf8,0x0,0x1                                                                                    
0009c4   11f9     IORWF     0xf9,0x0,0x1                                                                                    
0009c6   e104     BNZ       0x9d0                                                                                           
0009c8   0e10     MOVLW     0x10                                                                                            
0009ca   6ff8     MOVWF     0xf8,0x1                                                                                        
0009cc   0e27     MOVLW     0x27                                                                                            
0009ce   6ff9     MOVWF     0xf9,0x1                                                                                        
0009d0   07f8     DECF      0xf8,0x1,0x1       led_count--;                                                                 C:\datalogger\firmware\user\user.c
0009d2   0e00     MOVLW     0x0                                                                                             
0009d4   5bf9     SUBWFB    0xf9,0x1,0x1                                                                                    
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                               #define mLED_Both_Off()         {mLED_1_Off();mLED_2_Off();}                 C:\datalogger\firmware\user\user.c
                                               #define mLED_Both_On()          {mLED_1_On();mLED_2_On();}                   C:\datalogger\firmware\user\user.c
                                               #define mLED_Only_1_On()        {mLED_1_On();mLED_2_Off();}                  C:\datalogger\firmware\user\user.c
                                               #define mLED_Only_2_On()        {mLED_1_Off();mLED_2_On();}                  C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
0009d6   a26d     BTFSS     0x6d,0x1,0x0       if(UCONbits.SUSPND == 1) //power conservation mode                           C:\datalogger\firmware\user\user.c
0009d8   d00b     BRA       0x9f0                                                                                           
                                               {                                                                            C:\datalogger\firmware\user\user.c
0009da   51f8     MOVF      0xf8,0x0,0x1           if(led_count==0)                                                         C:\datalogger\firmware\user\user.c
0009dc   11f9     IORWF     0xf9,0x0,0x1                                                                                    
0009de   e107     BNZ       0x9ee                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
0009e0   708c     BTG       0x8c,0x0,0x0               mLED_1_Toggle();                                                     C:\datalogger\firmware\user\user.c
0009e2   508c     MOVF      0x8c,0x0,0x0               mLED_2 = mLED_1;        // Both blink at the same time               C:\datalogger\firmware\user\user.c
0009e4   0b01     ANDLW     0x1                                                                                             
0009e6   e002     BZ        0x9ec                                                                                           
0009e8   828c     BSF       0x8c,0x1,0x0                                                                                    
0009ea   d001     BRA       0x9ee                                                                                           
0009ec   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\datalogger\firmware\user\user.c
                                               }                                                                            C:\datalogger\firmware\user\user.c
0009ee   d02f     BRA       0xa4e              else                                                                         C:\datalogger\firmware\user\user.c
                                               {                                                                            C:\datalogger\firmware\user\user.c
0009f0   0100     MOVLB     0x0                    if(usb_device_state == DETACHED_STATE)                                   C:\datalogger\firmware\user\user.c
0009f2   51f2     MOVF      0xf2,0x0,0x1                                                                                    
0009f4   e103     BNZ       0x9fc                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
0009f6   908c     BCF       0x8c,0x0,0x0               mLED_Both_Off();                                                     C:\datalogger\firmware\user\user.c
0009f8   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                   }                                                                        C:\datalogger\firmware\user\user.c
0009fa   d029     BRA       0xa4e                  else if(usb_device_state == ATTACHED_STATE)                              C:\datalogger\firmware\user\user.c
0009fc   05f2     DECF      0xf2,0x0,0x1                                                                                    
0009fe   e103     BNZ       0xa06                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
000a00   808c     BSF       0x8c,0x0,0x0               mLED_Both_On();                                                      C:\datalogger\firmware\user\user.c
000a02   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\datalogger\firmware\user\user.c
000a04   d024     BRA       0xa4e                  else if(usb_device_state == POWERED_STATE)                               C:\datalogger\firmware\user\user.c
000a06   0e02     MOVLW     0x2                                                                                             
000a08   5df2     SUBWF     0xf2,0x0,0x1                                                                                    
000a0a   e103     BNZ       0xa12                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
000a0c   808c     BSF       0x8c,0x0,0x0               mLED_Only_1_On();                                                    C:\datalogger\firmware\user\user.c
000a0e   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\datalogger\firmware\user\user.c
000a10   d01e     BRA       0xa4e                  else if(usb_device_state == DEFAULT_STATE)                               C:\datalogger\firmware\user\user.c
000a12   0e03     MOVLW     0x3                                                                                             
000a14   5df2     SUBWF     0xf2,0x0,0x1                                                                                    
000a16   e103     BNZ       0xa1e                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
000a18   908c     BCF       0x8c,0x0,0x0               mLED_Only_2_On();                                                    C:\datalogger\firmware\user\user.c
000a1a   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\datalogger\firmware\user\user.c
000a1c   d018     BRA       0xa4e                  else if(usb_device_state == ADDRESS_STATE)                               C:\datalogger\firmware\user\user.c
000a1e   0e05     MOVLW     0x5                                                                                             
000a20   5df2     SUBWF     0xf2,0x0,0x1                                                                                    
000a22   e107     BNZ       0xa32                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
000a24   0100     MOVLB     0x0                        if(led_count == 0)                                                   C:\datalogger\firmware\user\user.c
000a26   51f8     MOVF      0xf8,0x0,0x1                                                                                    
000a28   11f9     IORWF     0xf9,0x0,0x1                                                                                    
000a2a   e102     BNZ       0xa30                                                                                           
                                                       {                                                                    C:\datalogger\firmware\user\user.c
000a2c   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\datalogger\firmware\user\user.c
000a2e   928c     BCF       0x8c,0x1,0x0                   mLED_2_Off();                                                    C:\datalogger\firmware\user\user.c
                                                       }                                                                    C:\datalogger\firmware\user\user.c
                                                   }                                                                        C:\datalogger\firmware\user\user.c
000a30   d00e     BRA       0xa4e                  else if(usb_device_state == CONFIGURED_STATE)                            C:\datalogger\firmware\user\user.c
000a32   0e06     MOVLW     0x6                                                                                             
000a34   5df2     SUBWF     0xf2,0x0,0x1                                                                                    
000a36   e10b     BNZ       0xa4e                                                                                           
                                                   {                                                                        C:\datalogger\firmware\user\user.c
000a38   0100     MOVLB     0x0                        if(led_count==0)                                                     C:\datalogger\firmware\user\user.c
000a3a   51f8     MOVF      0xf8,0x0,0x1                                                                                    
000a3c   11f9     IORWF     0xf9,0x0,0x1                                                                                    
000a3e   e107     BNZ       0xa4e                                                                                           
                                                       {                                                                    C:\datalogger\firmware\user\user.c
000a40   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\datalogger\firmware\user\user.c
000a42   508c     MOVF      0x8c,0x0,0x0                   mLED_2 = !mLED_1;       // Alternate blink                       C:\datalogger\firmware\user\user.c
000a44   0b01     ANDLW     0x1                                                                                             
000a46   e002     BZ        0xa4c                                                                                           
000a48   928c     BCF       0x8c,0x1,0x0                                                                                    
000a4a   d001     BRA       0xa4e                                                                                           
000a4c   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                       }                                                                    C:\datalogger\firmware\user\user.c
                                                   }                                                                        C:\datalogger\firmware\user\user.c
                                               }                                                                            C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
000a4e   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           //UCAM                                                                           C:\datalogger\firmware\user\user.c
                                           //code section will blink LEDs 5 times                                           C:\datalogger\firmware\user\user.c
                                           // For some reason this writes the ENTIRE PORTD                                  C:\datalogger\firmware\user\user.c
000a50   cfd9     MOVFF     0xfd9,0xfe6    void Blink(byte onState)                                                         C:\datalogger\firmware\user\user.c
000a52   ffe6                                                                                                               
000a54   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000a56   ffd9                                                                                                               
                                           {                                                                                C:\datalogger\firmware\user\user.c
000a58   0efe     MOVLW     0xfe           	LATD = onState;                                                                 C:\datalogger\firmware\user\user.c
000a5a   50db     MOVF      0xdb,0x0,0x0                                                                                    
000a5c   6e8c     MOVWF     0x8c,0x0                                                                                        
000a5e   d000     BRA       0xa60          	return;                                                                         C:\datalogger\firmware\user\user.c
000a60   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\datalogger\firmware\user\user.c
000a62   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000a64   ffd9                                                                                                               
000a66   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
000a68   cfd9     MOVFF     0xfd9,0xfe6    byte ReadPOT(void)                                                               C:\datalogger\firmware\user\user.c
000a6a   ffe6                                                                                                               
000a6c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000a6e   ffd9                                                                                                               
000a70   0e02     MOVLW     0x2                                                                                             
000a72   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                           	byte low, high;                                                                 C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
000a74   82c2     BSF       0xc2,0x1,0x0       ADCON0bits.GO = 1;              // Start AD conversion                       C:\datalogger\firmware\user\user.c
000a76   b2c2     BTFSC     0xc2,0x1,0x0       while(ADCON0bits.NOT_DONE);     // Wait for conversion                       C:\datalogger\firmware\user\user.c
000a78   d7fe     BRA       0xa76                                                                                           
000a7a   50c3     MOVF      0xc3,0x0,0x0   	low = ADRESL;                                                                   C:\datalogger\firmware\user\user.c
000a7c   6edf     MOVWF     0xdf,0x0                                                                                        
000a7e   0e01     MOVLW     0x1            	high = ADRESH;                                                                  C:\datalogger\firmware\user\user.c
000a80   cfc4     MOVFF     0xfc4,0xfdb                                                                                     
000a82   ffdb                                                                                                               
000a84   90d8     BCF       0xd8,0x0,0x0   	low >>= 2;                                                                      C:\datalogger\firmware\user\user.c
000a86   32df     RRCF      0xdf,0x1,0x0                                                                                    
000a88   90d8     BCF       0xd8,0x0,0x0                                                                                    
000a8a   32df     RRCF      0xdf,0x1,0x0                                                                                    
000a8c   cfdb     MOVFF     0xfdb,0xff3    	high <<= 6;                                                                     C:\datalogger\firmware\user\user.c
000a8e   fff3                                                                                                               
000a90   40f3     RRNCF     0xf3,0x0,0x0                                                                                    
000a92   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000a94   0bc0     ANDLW     0xc0                                                                                            
000a96   6ef3     MOVWF     0xf3,0x0                                                                                        
000a98   0e01     MOVLW     0x1                                                                                             
000a9a   cff3     MOVFF     0xff3,0xfdb                                                                                     
000a9c   ffdb                                                                                                               
000a9e   50db     MOVF      0xdb,0x0,0x0       return (low | high);                                                         C:\datalogger\firmware\user\user.c
000aa0   10df     IORWF     0xdf,0x0,0x0                                                                                    
000aa2   6e14     MOVWF     0x14,0x0       }                                                                                C:\datalogger\firmware\user\user.c
000aa4   0e02     MOVLW     0x2                                                                                             
000aa6   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000aa8   e203     BC        0xab0                                                                                           
000aaa   d000     BRA       0xaac                                                                                           
000aac   6ae1     CLRF      0xe1,0x0                                                                                        
000aae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ab0   6ee1     MOVWF     0xe1,0x0                                                                                        
000ab2   5014     MOVF      0x14,0x0,0x0                                                                                    
000ab4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ab6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000ab8   ffd9                                                                                                               
000aba   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           /**                                                                              C:\datalogger\firmware\user\user.c
                                            * Run lots of ADC samples and toggle an IO                                      C:\datalogger\firmware\user\user.c
                                            * to test sampling rate.                                                        C:\datalogger\firmware\user\user.c
                                            */                                                                              C:\datalogger\firmware\user\user.c
000abc   cfd9     MOVFF     0xfd9,0xfe6    void nullSampler(void)                                                           C:\datalogger\firmware\user\user.c
000abe   ffe6                                                                                                               
000ac0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000ac2   ffd9                                                                                                               
000ac4   0e02     MOVLW     0x2                                                                                             
000ac6   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                           	uint16_t i;                                                                     C:\datalogger\firmware\user\user.c
000ac8   6ade     CLRF      0xde,0x0       	for( i = 0; i < 65535; i++)                                                     C:\datalogger\firmware\user\user.c
000aca   6add     CLRF      0xdd,0x0                                                                                        
000acc   cfde     MOVFF     0xfde,0x14                                                                                      
000ace   f014                                                                                                               
000ad0   cfdd     MOVFF     0xfdd,0x15                                                                                      
000ad2   f015                                                                                                               
000ad4   6a16     CLRF      0x16,0x0                                                                                        
000ad6   90d8     BCF       0xd8,0x0,0x0                                                                                    
000ad8   5016     MOVF      0x16,0x0,0x0                                                                                    
000ada   0a00     XORLW     0x0                                                                                             
000adc   e606     BN        0xaea                                                                                           
000ade   0eff     MOVLW     0xff                                                                                            
000ae0   5c14     SUBWF     0x14,0x0,0x0                                                                                    
000ae2   0eff     MOVLW     0xff                                                                                            
000ae4   5815     SUBWFB    0x15,0x0,0x0                                                                                    
000ae6   0e00     MOVLW     0x0                                                                                             
000ae8   5816     SUBWFB    0x16,0x0,0x0                                                                                    
000aea   e20d     BC        0xb06                                                                                           
000afc   2adf     INCF      0xdf,0x1,0x0                                                                                    
000afe   0e01     MOVLW     0x1                                                                                             
000b00   e301     BNC       0xb04                                                                                           
000b02   2adb     INCF      0xdb,0x1,0x0                                                                                    
000b04   d7e3     BRA       0xacc                                                                                           
                                           	{                                                                               C:\datalogger\firmware\user\user.c
000aec   82c2     BSF       0xc2,0x1,0x0   		ADCON0bits.GO = 1;                                                             C:\datalogger\firmware\user\user.c
000aee   b2c2     BTFSC     0xc2,0x1,0x0       	while(ADCON0bits.NOT_DONE);                                                 C:\datalogger\firmware\user\user.c
000af0   d7fe     BRA       0xaee                                                                                           
000af2   508c     MOVF      0x8c,0x0,0x0   		LATD = ~(LATDbits.LATD0) & 0x01;                                               C:\datalogger\firmware\user\user.c
000af4   0b01     ANDLW     0x1                                                                                             
000af6   1ce8     COMF      0xe8,0x0,0x0                                                                                    
000af8   0b01     ANDLW     0x1                                                                                             
000afa   6e8c     MOVWF     0x8c,0x0                                                                                        
                                           	}                                                                               C:\datalogger\firmware\user\user.c
                                           	return;                                                                         C:\datalogger\firmware\user\user.c
000b06   0e02     MOVLW     0x2            }                                                                                C:\datalogger\firmware\user\user.c
000b08   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000b0a   e203     BC        0xb12                                                                                           
000b0c   d000     BRA       0xb0e                                                                                           
000b0e   6ae1     CLRF      0xe1,0x0                                                                                        
000b10   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b12   6ee1     MOVWF     0xe1,0x0                                                                                        
000b14   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b16   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000b18   ffd9                                                                                                               
000b1a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           void CheckButtons(void)                                                          C:\datalogger\firmware\user\user.c
                                           {                                                                                C:\datalogger\firmware\user\user.c
000b1c   d000     BRA       0xb1e          	return;                                                                         C:\datalogger\firmware\user\user.c
000b1e   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           //Delay of 1 gives 6-8us (this is a totally useless number)                      C:\datalogger\firmware\user\user.c
000b20   cfd9     MOVFF     0xfd9,0xfe6    void CallDelay(int delay)                                                        C:\datalogger\firmware\user\user.c
000b22   ffe6                                                                                                               
000b24   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000b26   ffd9                                                                                                               
000b28   0e02     MOVLW     0x2                                                                                             
000b2a   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                           	int i;                                                                          C:\datalogger\firmware\user\user.c
000b2c   6ade     CLRF      0xde,0x0       	for(i=0;i<delay;i++)                                                            C:\datalogger\firmware\user\user.c
000b2e   6add     CLRF      0xdd,0x0                                                                                        
000b30   cfde     MOVFF     0xfde,0x14                                                                                      
000b32   f014                                                                                                               
000b34   cfdd     MOVFF     0xfdd,0x15                                                                                      
000b36   f015                                                                                                               
000b38   0efd     MOVLW     0xfd                                                                                            
000b3a   cfdb     MOVFF     0xfdb,0x16                                                                                      
000b3c   f016                                                                                                               
000b3e   0efe     MOVLW     0xfe                                                                                            
000b40   cfdb     MOVFF     0xfdb,0x17                                                                                      
000b42   f017                                                                                                               
000b44   5015     MOVF      0x15,0x0,0x0                                                                                    
000b46   1817     XORWF     0x17,0x0,0x0                                                                                    
000b48   aee8     BTFSS     0xe8,0x7,0x0                                                                                    
000b4a   d002     BRA       0xb50                                                                                           
000b4c   3417     RLCF      0x17,0x0,0x0                                                                                    
000b4e   d004     BRA       0xb58                                                                                           
000b50   5016     MOVF      0x16,0x0,0x0                                                                                    
000b52   5c14     SUBWF     0x14,0x0,0x0                                                                                    
000b54   5017     MOVF      0x17,0x0,0x0                                                                                    
000b56   5815     SUBWFB    0x15,0x0,0x0                                                                                    
000b58   e205     BC        0xb64                                                                                           
000b5a   2adf     INCF      0xdf,0x1,0x0                                                                                    
000b5c   0e01     MOVLW     0x1                                                                                             
000b5e   e301     BNC       0xb62                                                                                           
000b60   2adb     INCF      0xdb,0x1,0x0                                                                                    
000b62   d7e6     BRA       0xb30                                                                                           
                                           	{                                                                               C:\datalogger\firmware\user\user.c
                                           	}                                                                               C:\datalogger\firmware\user\user.c
                                           	return;                                                                         C:\datalogger\firmware\user\user.c
000b64   0e02     MOVLW     0x2            }                                                                                C:\datalogger\firmware\user\user.c
000b66   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000b68   e203     BC        0xb70                                                                                           
000b6a   d000     BRA       0xb6c                                                                                           
000b6c   6ae1     CLRF      0xe1,0x0                                                                                        
000b6e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b70   6ee1     MOVWF     0xe1,0x0                                                                                        
000b72   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b74   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000b76   ffd9                                                                                                               
000b78   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
000b7a   cfd9     MOVFF     0xfd9,0xfe6    void ThermWrite(int command)                                                     C:\datalogger\firmware\user\user.c
000b7c   ffe6                                                                                                               
000b7e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000b80   ffd9                                                                                                               
000b82   0e02     MOVLW     0x2                                                                                             
000b84   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                           	int i;                                                                          C:\datalogger\firmware\user\user.c
                                           	//Set RD7 as OUTPUT                                                             C:\datalogger\firmware\user\user.c
                                           	                                                                                C:\datalogger\firmware\user\user.c
000b86   6ade     CLRF      0xde,0x0       	for (i=0;i<=15;i++)                                                             C:\datalogger\firmware\user\user.c
000b88   6add     CLRF      0xdd,0x0                                                                                        
000b8a   cfde     MOVFF     0xfde,0x14                                                                                      
000b8c   f014                                                                                                               
000b8e   cfdd     MOVFF     0xfdd,0x15                                                                                      
000b90   f015                                                                                                               
000b92   3415     RLCF      0x15,0x0,0x0                                                                                    
000b94   e204     BC        0xb9e                                                                                           
000b96   5014     MOVF      0x14,0x0,0x0                                                                                    
000b98   080f     SUBLW     0xf                                                                                             
000b9a   0e00     MOVLW     0x0                                                                                             
000b9c   5415     SUBFWB    0x15,0x0,0x0                                                                                    
000b9e   e332     BNC       0xc04                                                                                           
000bfa   2adf     INCF      0xdf,0x1,0x0                                                                                    
000bfc   0e01     MOVLW     0x1                                                                                             
000bfe   e301     BNC       0xc02                                                                                           
000c00   2adb     INCF      0xdb,0x1,0x0                                                                                    
000c02   d7c3     BRA       0xb8a                                                                                           
                                           	{                                                                               C:\datalogger\firmware\user\user.c
000ba0   0efd     MOVLW     0xfd           		if (command & 1)                                                               C:\datalogger\firmware\user\user.c
000ba2   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ba4   0b01     ANDLW     0x1                                                                                             
000ba6   e011     BZ        0xbca                                                                                           
                                           		{                                                                              C:\datalogger\firmware\user\user.c
000ba8   0e18     MOVLW     0x18           			TRISD = 0x18;                                                                 C:\datalogger\firmware\user\user.c
000baa   6e95     MOVWF     0x95,0x0                                                                                        
000bac   9c8c     BCF       0x8c,0x6,0x0   			LATDbits.LATD6 = 0;                                                           C:\datalogger\firmware\user\user.c
000bae   0e01     MOVLW     0x1            			CallDelay(1);                                                                 C:\datalogger\firmware\user\user.c
000bb0   6ee6     MOVWF     0xe6,0x0                                                                                        
000bb2   6ae6     CLRF      0xe6,0x0                                                                                        
000bb4   dfb5     RCALL     0xb20                                                                                           
000bb6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bb8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bba   8c8c     BSF       0x8c,0x6,0x0   			LATDbits.LATD6 = 1;                                                           C:\datalogger\firmware\user\user.c
                                           			//TRISD = 0xD8;                                                               C:\datalogger\firmware\user\user.c
000bbc   0e0a     MOVLW     0xa            			CallDelay(10);                                                                C:\datalogger\firmware\user\user.c
000bbe   6ee6     MOVWF     0xe6,0x0                                                                                        
000bc0   6ae6     CLRF      0xe6,0x0                                                                                        
000bc2   dfae     RCALL     0xb20                                                                                           
000bc4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bc6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           		}                                                                              C:\datalogger\firmware\user\user.c
000bc8   d009     BRA       0xbdc          		else                                                                           C:\datalogger\firmware\user\user.c
                                           		{                                                                              C:\datalogger\firmware\user\user.c
000bca   0e18     MOVLW     0x18           			TRISD = 0x18;                                                                 C:\datalogger\firmware\user\user.c
000bcc   6e95     MOVWF     0x95,0x0                                                                                        
000bce   9c8c     BCF       0x8c,0x6,0x0   			LATDbits.LATD6 = 0;                                                           C:\datalogger\firmware\user\user.c
000bd0   0e0b     MOVLW     0xb            			CallDelay(11);                                                                C:\datalogger\firmware\user\user.c
000bd2   6ee6     MOVWF     0xe6,0x0                                                                                        
000bd4   6ae6     CLRF      0xe6,0x0                                                                                        
000bd6   dfa4     RCALL     0xb20                                                                                           
000bd8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bda   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			//CodeSectionAccessed(0x4);                                                   C:\datalogger\firmware\user\user.c
                                           		}                                                                              C:\datalogger\firmware\user\user.c
000bdc   50d9     MOVF      0xd9,0x0,0x0   		command >>=1;                                                                  C:\datalogger\firmware\user\user.c
000bde   0ffd     ADDLW     0xfd                                                                                            
000be0   6ee9     MOVWF     0xe9,0x0                                                                                        
000be2   0eff     MOVLW     0xff                                                                                            
000be4   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000be6   6eea     MOVWF     0xea,0x0                                                                                        
000be8   0e01     MOVLW     0x1                                                                                             
000bea   0b0f     ANDLW     0xf                                                                                             
000bec   e006     BZ        0xbfa                                                                                           
000bee   52ec     MOVF      0xec,0x1,0x0                                                                                    
000bf0   90d8     BCF       0xd8,0x0,0x0                                                                                    
000bf2   32ed     RRCF      0xed,0x1,0x0                                                                                    
000bf4   32ef     RRCF      0xef,0x1,0x0                                                                                    
000bf6   06e8     DECF      0xe8,0x1,0x0                                                                                    
000bf8   e1fa     BNZ       0xbee                                                                                           
                                           	}                                                                               C:\datalogger\firmware\user\user.c
                                           	return;                                                                         C:\datalogger\firmware\user\user.c
000c04   0e02     MOVLW     0x2            }                                                                                C:\datalogger\firmware\user\user.c
000c06   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000c08   e203     BC        0xc10                                                                                           
000c0a   d000     BRA       0xc0c                                                                                           
000c0c   6ae1     CLRF      0xe1,0x0                                                                                        
000c0e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c10   6ee1     MOVWF     0xe1,0x0                                                                                        
000c12   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c14   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000c16   ffd9                                                                                                               
000c18   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
000c1a   cfd9     MOVFF     0xfd9,0xfe6    int ThermReadTemp(void)                                                          C:\datalogger\firmware\user\user.c
000c1c   ffe6                                                                                                               
000c1e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000c20   ffd9                                                                                                               
000c22   0e12     MOVLW     0x12                                                                                            
000c24   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                           	int i;                                                                          C:\datalogger\firmware\user\user.c
                                           	int finalTemp;                                                                  C:\datalogger\firmware\user\user.c
                                           	int temp[7];                                                                    C:\datalogger\firmware\user\user.c
000c26   6ade     CLRF      0xde,0x0       	for (i=0;i<=7;i++)                                                              C:\datalogger\firmware\user\user.c
000c28   6add     CLRF      0xdd,0x0                                                                                        
000c2a   cfde     MOVFF     0xfde,0x14                                                                                      
000c2c   f014                                                                                                               
000c2e   cfdd     MOVFF     0xfdd,0x15                                                                                      
000c30   f015                                                                                                               
000c32   3415     RLCF      0x15,0x0,0x0                                                                                    
000c34   e204     BC        0xc3e                                                                                           
000c36   5014     MOVF      0x14,0x0,0x0                                                                                    
000c38   0807     SUBLW     0x7                                                                                             
000c3a   0e00     MOVLW     0x0                                                                                             
000c3c   5415     SUBFWB    0x15,0x0,0x0                                                                                    
000c3e   e35a     BNC       0xcf4                                                                                           
000cea   2adf     INCF      0xdf,0x1,0x0                                                                                    
000cec   0e01     MOVLW     0x1                                                                                             
000cee   e301     BNC       0xcf2                                                                                           
000cf0   2adb     INCF      0xdb,0x1,0x0                                                                                    
000cf2   d79b     BRA       0xc2a                                                                                           
                                           	{                                                                               C:\datalogger\firmware\user\user.c
000c40   0e18     MOVLW     0x18           		TRISD = 0x18;                                                                  C:\datalogger\firmware\user\user.c
000c42   6e95     MOVWF     0x95,0x0                                                                                        
000c44   9e8c     BCF       0x8c,0x7,0x0   		LATDbits.LATD7 = 0;                                                            C:\datalogger\firmware\user\user.c
000c46   0e98     MOVLW     0x98           		TRISD = 0x98;                                                                  C:\datalogger\firmware\user\user.c
000c48   6e95     MOVWF     0x95,0x0                                                                                        
000c4a   5083     MOVF      0x83,0x0,0x0   		temp[i] = temp_sense;                                                          C:\datalogger\firmware\user\user.c
000c4c   0b80     ANDLW     0x80                                                                                            
000c4e   e001     BZ        0xc52                                                                                           
000c50   0e01     MOVLW     0x1                                                                                             
000c52   6ee6     MOVWF     0xe6,0x0                                                                                        
000c54   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000c56   0f04     ADDLW     0x4                                                                                             
000c58   6e14     MOVWF     0x14,0x0                                                                                        
000c5a   cfda     MOVFF     0xfda,0x15                                                                                      
000c5c   f015                                                                                                               
000c5e   0e02     MOVLW     0x2                                                                                             
000c60   6e08     MOVWF     0x8,0x0                                                                                         
000c62   6a09     CLRF      0x9,0x0                                                                                         
000c64   cfde     MOVFF     0xfde,0xd                                                                                       
000c66   f00d                                                                                                               
000c68   cfdd     MOVFF     0xfdd,0xe                                                                                       
000c6a   f00e                                                                                                               
000c6c   ecc5     CALL      0x178a,0x0                                                                                      
000c6e   f00b                                                                                                               
000c70   5014     MOVF      0x14,0x0,0x0                                                                                    
000c72   2406     ADDWF     0x6,0x0,0x0                                                                                     
000c74   6ee9     MOVWF     0xe9,0x0                                                                                        
000c76   5015     MOVF      0x15,0x0,0x0                                                                                    
000c78   2007     ADDWFC    0x7,0x0,0x0                                                                                     
000c7a   6eea     MOVWF     0xea,0x0                                                                                        
000c7c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c7e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000c80   6eee     MOVWF     0xee,0x0                                                                                        
000c82   6aed     CLRF      0xed,0x0                                                                                        
000c84   0e08     MOVLW     0x8            		CallDelay(8);                                                                  C:\datalogger\firmware\user\user.c
000c86   6ee6     MOVWF     0xe6,0x0                                                                                        
000c88   6ae6     CLRF      0xe6,0x0                                                                                        
000c8a   df4a     RCALL     0xb20                                                                                           
000c8c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c8e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c90   50d9     MOVF      0xd9,0x0,0x0   		if (temp[i]){                                                                  C:\datalogger\firmware\user\user.c
000c92   0f04     ADDLW     0x4                                                                                             
000c94   6e14     MOVWF     0x14,0x0                                                                                        
000c96   cfda     MOVFF     0xfda,0x15                                                                                      
000c98   f015                                                                                                               
000c9a   0e02     MOVLW     0x2                                                                                             
000c9c   6e08     MOVWF     0x8,0x0                                                                                         
000c9e   6a09     CLRF      0x9,0x0                                                                                         
000ca0   cfde     MOVFF     0xfde,0xd                                                                                       
000ca2   f00d                                                                                                               
000ca4   cfdd     MOVFF     0xfdd,0xe                                                                                       
000ca6   f00e                                                                                                               
000ca8   ecc5     CALL      0x178a,0x0                                                                                      
000caa   f00b                                                                                                               
000cac   5014     MOVF      0x14,0x0,0x0                                                                                    
000cae   2406     ADDWF     0x6,0x0,0x0                                                                                     
000cb0   6ee9     MOVWF     0xe9,0x0                                                                                        
000cb2   5015     MOVF      0x15,0x0,0x0                                                                                    
000cb4   2007     ADDWFC    0x7,0x0,0x0                                                                                     
000cb6   6eea     MOVWF     0xea,0x0                                                                                        
000cb8   50ee     MOVF      0xee,0x0,0x0                                                                                    
000cba   10ed     IORWF     0xed,0x0,0x0                                                                                    
000cbc   e016     BZ        0xcea                                                                                           
000cbe   0e01     MOVLW     0x1            			finalTemp += 1 << i;                                                          C:\datalogger\firmware\user\user.c
000cc0   52df     MOVF      0xdf,0x1,0x0                                                                                    
000cc2   e006     BZ        0xcd0                                                                                           
000cc4   cfdf     MOVFF     0xfdf,0xff3                                                                                     
000cc6   fff3                                                                                                               
000cc8   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
000cca   0bfe     ANDLW     0xfe                                                                                            
000ccc   06f3     DECF      0xf3,0x1,0x0                                                                                    
000cce   e1fc     BNZ       0xcc8                                                                                           
000cd0   6e14     MOVWF     0x14,0x0                                                                                        
000cd2   6a15     CLRF      0x15,0x0                                                                                        
000cd4   be14     BTFSC     0x14,0x7,0x0                                                                                    
000cd6   6815     SETF      0x15,0x0                                                                                        
000cd8   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000cda   0f02     ADDLW     0x2                                                                                             
000cdc   6ee9     MOVWF     0xe9,0x0                                                                                        
000cde   cfda     MOVFF     0xfda,0xfea                                                                                     
000ce0   ffea                                                                                                               
000ce2   5014     MOVF      0x14,0x0,0x0                                                                                    
000ce4   26ee     ADDWF     0xee,0x1,0x0                                                                                    
000ce6   5015     MOVF      0x15,0x0,0x0                                                                                    
000ce8   22ed     ADDWFC    0xed,0x1,0x0                                                                                    
                                           		}                                                                              C:\datalogger\firmware\user\user.c
                                           	}                                                                               C:\datalogger\firmware\user\user.c
                                           	//CodeSectionAccessed(0x4);                                                     C:\datalogger\firmware\user\user.c
000cf4   0e02     MOVLW     0x2            	return finalTemp;                                                               C:\datalogger\firmware\user\user.c
000cf6   cfdb     MOVFF     0xfdb,0x14                                                                                      
000cf8   f014                                                                                                               
000cfa   0e03     MOVLW     0x3                                                                                             
000cfc   cfdb     MOVFF     0xfdb,0x15                                                                                      
000cfe   f015                                                                                                               
000d00   c014     MOVFF     0x14,0xff3                                                                                      
000d02   fff3                                                                                                               
000d04   c015     MOVFF     0x15,0xff4                                                                                      
000d06   fff4                                                                                                               
000d08   0e12     MOVLW     0x12           }                                                                                C:\datalogger\firmware\user\user.c
000d0a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000d0c   e203     BC        0xd14                                                                                           
000d0e   d000     BRA       0xd10                                                                                           
000d10   6ae1     CLRF      0xe1,0x0                                                                                        
000d12   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d14   6ee1     MOVWF     0xe1,0x0                                                                                        
000d16   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d18   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000d1a   ffd9                                                                                                               
000d1c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           void ThermSendReset(void)                                                        C:\datalogger\firmware\user\user.c
                                           {                                                                                C:\datalogger\firmware\user\user.c
000d1e   0e18     MOVLW     0x18           	TRISD = 0x18; //Set all but RD3, RD4 as output                                  C:\datalogger\firmware\user\user.c
000d20   6e95     MOVWF     0x95,0x0                                                                                        
000d22   9e8c     BCF       0x8c,0x7,0x0   	LATDbits.LATD7 = 0;  //Pull Data line low                                       C:\datalogger\firmware\user\user.c
000d24   0e53     MOVLW     0x53           	CallDelay(83);//CallDelay gives 6-8us delay per unit, min. 480us required       C:\datalogger\firmware\user\user.c
000d26   6ee6     MOVWF     0xe6,0x0                                                                                        
000d28   6ae6     CLRF      0xe6,0x0                                                                                        
000d2a   defa     RCALL     0xb20                                                                                           
000d2c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d2e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	//After 30us, thermometer returns 112us (60-240us) presence pulse (line low)    C:\datalogger\firmware\user\user.c
000d30   0e98     MOVLW     0x98           	TRISD = 0x98;	//Set RD7 as INPUT                                                C:\datalogger\firmware\user\user.c
000d32   6e95     MOVWF     0x95,0x0                                                                                        
000d34   0e02     MOVLW     0x2            	CallDelay(2);                                                                   C:\datalogger\firmware\user\user.c
000d36   6ee6     MOVWF     0xe6,0x0                                                                                        
000d38   6ae6     CLRF      0xe6,0x0                                                                                        
000d3a   def2     RCALL     0xb20                                                                                           
000d3c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d40   d000     BRA       0xd42          	return;                                                                         C:\datalogger\firmware\user\user.c
000d42   0012     RETURN    0x0            }//end ThermSendReset                                                            C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
000d44   cfd9     MOVFF     0xfd9,0xfe6    int ReadTemp(void)                                                               C:\datalogger\firmware\user\user.c
000d46   ffe6                                                                                                               
000d48   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000d4a   ffd9                                                                                                               
000d4c   0e02     MOVLW     0x2                                                                                             
000d4e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\user\user.c
                                           	int deg;                                                                        C:\datalogger\firmware\user\user.c
000d50   dfe6     RCALL     0xd1e          	ThermSendReset();                                                               C:\datalogger\firmware\user\user.c
000d52   0eaa     MOVLW     0xaa           	ThermWrite(0xAA);//Request temp command                                         C:\datalogger\firmware\user\user.c
000d54   6ee6     MOVWF     0xe6,0x0                                                                                        
000d56   6ae6     CLRF      0xe6,0x0                                                                                        
000d58   df10     RCALL     0xb7a                                                                                           
000d5a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d5c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	//ThermWrite(0xF);//Request temp command                                        C:\datalogger\firmware\user\user.c
000d5e   df5d     RCALL     0xc1a          	deg = ThermReadTemp();                                                          C:\datalogger\firmware\user\user.c
000d60   cff3     MOVFF     0xff3,0xfde                                                                                     
000d62   ffde                                                                                                               
000d64   cff4     MOVFF     0xff4,0xfdd                                                                                     
000d66   ffdd                                                                                                               
000d68   cfde     MOVFF     0xfde,0x14     	return deg;                                                                     C:\datalogger\firmware\user\user.c
000d6a   f014                                                                                                               
000d6c   cfdd     MOVFF     0xfdd,0x15                                                                                      
000d6e   f015                                                                                                               
000d70   c014     MOVFF     0x14,0xff3                                                                                      
000d72   fff3                                                                                                               
000d74   c015     MOVFF     0x15,0xff4                                                                                      
000d76   fff4                                                                                                               
000d78   0e02     MOVLW     0x2            }//end ReadTemp                                                                  C:\datalogger\firmware\user\user.c
000d7a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000d7c   e203     BC        0xd84                                                                                           
000d7e   d000     BRA       0xd80                                                                                           
000d80   6ae1     CLRF      0xe1,0x0                                                                                        
000d82   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d84   6ee1     MOVWF     0xe1,0x0                                                                                        
000d86   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d88   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000d8a   ffd9                                                                                                               
000d8c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           void UserTasks(void)                                                             C:\datalogger\firmware\user\user.c
                                           {                                                                                C:\datalogger\firmware\user\user.c
000d8e   d000     BRA       0xd90          	return;                                                                         C:\datalogger\firmware\user\user.c
000d90   0012     RETURN    0x0            }                                                                                C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           void UserInit(void)                                                              C:\datalogger\firmware\user\user.c
                                           {                                                                                C:\datalogger\firmware\user\user.c
000d92   0ef0     MOVLW     0xf0               mInitAllLEDs();                                                              C:\datalogger\firmware\user\user.c
000d94   168c     ANDWF     0x8c,0x1,0x0                                                                                    
000d96   1695     ANDWF     0x95,0x1,0x0                                                                                    
000d98   8092     BSF       0x92,0x0,0x0   	TRISAbits.TRISA0=1;                                                             C:\datalogger\firmware\user\user.c
000d9a   0e01     MOVLW     0x1            	ADCON0=0x01;                                                                    C:\datalogger\firmware\user\user.c
000d9c   6ec2     MOVWF     0xc2,0x0                                                                                        
000d9e   0e3c     MOVLW     0x3c           	ADCON2=0x3C;                                                                    C:\datalogger\firmware\user\user.c
000da0   6ec0     MOVWF     0xc0,0x0                                                                                        
000da2   8ec0     BSF       0xc0,0x7,0x0       ADCON2bits.ADFM = 1;   // ADC result right justified                         C:\datalogger\firmware\user\user.c
000da4   0e18     MOVLW     0x18           	TRISD = 0x18;                                                                   C:\datalogger\firmware\user\user.c
000da6   6e95     MOVWF     0x95,0x0                                                                                        
                                           	// Set RD0 and RD1 as output                                                    C:\datalogger\firmware\user\user.c
000da8   5095     MOVF      0x95,0x0,0x0   	TRISD &= ~(1 << TRISDbits.TRISD0 | 1 << TRISDbits.TRISD1);                      C:\datalogger\firmware\user\user.c
000daa   0b02     ANDLW     0x2                                                                                             
000dac   e001     BZ        0xdb0                                                                                           
000dae   0e01     MOVLW     0x1                                                                                             
000db0   6e16     MOVWF     0x16,0x0                                                                                        
000db2   0e01     MOVLW     0x1                                                                                             
000db4   5216     MOVF      0x16,0x1,0x0                                                                                    
000db6   e004     BZ        0xdc0                                                                                           
000db8   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
000dba   0bfe     ANDLW     0xfe                                                                                            
000dbc   0616     DECF      0x16,0x1,0x0                                                                                    
000dbe   e1fc     BNZ       0xdb8                                                                                           
000dc0   6e15     MOVWF     0x15,0x0                                                                                        
000dc2   5095     MOVF      0x95,0x0,0x0                                                                                    
000dc4   0b01     ANDLW     0x1                                                                                             
000dc6   6e14     MOVWF     0x14,0x0                                                                                        
000dc8   0e01     MOVLW     0x1                                                                                             
000dca   5214     MOVF      0x14,0x1,0x0                                                                                    
000dcc   e004     BZ        0xdd6                                                                                           
000dce   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
000dd0   0bfe     ANDLW     0xfe                                                                                            
000dd2   0614     DECF      0x14,0x1,0x0                                                                                    
000dd4   e1fc     BNZ       0xdce                                                                                           
000dd6   1015     IORWF     0x15,0x0,0x0                                                                                    
000dd8   1ce8     COMF      0xe8,0x0,0x0                                                                                    
000dda   1695     ANDWF     0x95,0x1,0x0                                                                                    
000ddc   dfa0     RCALL     0xd1e          	ThermSendReset();                                                               C:\datalogger\firmware\user\user.c
000dde   0e01     MOVLW     0x1            	initAcquisition(0x0001);                                                        C:\datalogger\firmware\user\user.c
000de0   6ee6     MOVWF     0xe6,0x0                                                                                        
000de2   6ae6     CLRF      0xe6,0x0                                                                                        
000de4   ec0b     CALL      0x1816,0x0                                                                                      
000de6   f00c                                                                                                               
000de8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dec   0012     RETURN    0x0            }//end UserInit                                                                  C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                                                                                                            C:\datalogger\firmware\user\user.c
                                           /** EOF user.c ***************************************************************/  C:\datalogger\firmware\user\user.c
                                           /** I N C L U D E S **********************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           #include <p18cxxx.h>                                                             C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           #ifdef USB_USE_GEN                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /** V A R I A B L E S ********************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           #pragma udata                                                                    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           byte usbgen_rx_len;                                                              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           #pragma code                                                                     C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /** U S E R  A P I ***********************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Function:        void USBGenInitEP(void)                                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * PreCondition:    None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Input:           None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Overview:        USBGenInitEP initializes generic endpoints, buffer           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  descriptors, internal state-machine, and variables.          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  It should be called after the USB host has sent out a        C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  SET_CONFIGURATION request.                                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           void USBGenInitEP(void)                                                          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           {                                                                                C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001516   0100     MOVLB     0x0                usbgen_rx_len = 0;                                                           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001518   6bfa     CLRF      0xfa,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00151a   0e1e     MOVLW     0x1e               USBGEN_UEP = EP_OUT_IN|HSHK_EN;             // Enable 2 data pipes           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00151c   6e71     MOVWF     0x71,0x0                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                * Do not have to init Cnt of IN pipes here.                                 C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                * Reason:  Number of bytes to send to the host                              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                *          varies from one transaction to                                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                *          another. Cnt should equal the exact                              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                *          number of bytes to transmit for                                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                *          a given IN transaction.                                          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                *          This number of bytes will only                                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                *          be known right before the data is                                C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                *          sent.                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                */                                                                          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00151e   0104     MOVLB     0x4                USBGEN_BD_OUT.Cnt = sizeof(usbgen_out);     // Set buffer size               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001520   0e40     MOVLW     0x40                                                                                            
001522   6f09     MOVWF     0x9,0x1                                                                                         
001524   0e28     MOVLW     0x28               USBGEN_BD_OUT.ADR = (byte*)&usbgen_out;     // Set buffer address            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001526   6f0a     MOVWF     0xa,0x1                                                                                         
001528   0e04     MOVLW     0x4                                                                                             
00152a   6f0b     MOVWF     0xb,0x1                                                                                         
00152c   0e88     MOVLW     0x88               USBGEN_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00152e   6f08     MOVWF     0x8,0x1                                                                                         
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001530   0104     MOVLB     0x4                USBGEN_BD_IN.ADR = (byte*)&usbgen_in;      // Set buffer address             C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001532   0e68     MOVLW     0x68                                                                                            
001534   6f0e     MOVWF     0xe,0x1                                                                                         
001536   0e04     MOVLW     0x4                                                                                             
001538   6f0f     MOVWF     0xf,0x1                                                                                         
00153a   0e40     MOVLW     0x40               USBGEN_BD_IN.Stat._byte = _UCPU|_DAT1;      // Set buffer status             C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00153c   6f0c     MOVWF     0xc,0x1                                                                                         
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00153e   0012     RETURN    0x0            }//end USBGenInitEP                                                              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Function:        void USBGenWrite(byte *buffer, byte len)                     C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * PreCondition:    mUSBGenTxIsBusy() must return false.                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  Value of 'len' must be equal to or smaller than              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  USBGEN_EP_SIZE                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  For an interrupt/bulk endpoint, the largest buffer size is   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  64 bytes.                                                    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Input:           buffer  : Pointer to the starting location of data bytes     C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  len     : Number of bytes to be transferred                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Output:          None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Side Effects:    None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Overview:        Use this macro to transfer data located in data memory.      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  Remember: mUSBGenTxIsBusy() must return false before user    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  can call this function.                                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  Unexpected behavior will occur if this function is called    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  when mUSBGenTxIsBusy() != 0                                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  Typical Usage:                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  if(!mUSBGenTxIsBusy())                                       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                      USBGenWrite(buffer, 3);                                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Note:            None                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001540   cfd9     MOVFF     0xfd9,0xfe6    void USBGenWrite(byte *buffer, byte len)                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001542   ffe6                                                                                                               
001544   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001546   ffd9                                                                                                               
001548   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           	byte i;                                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           	                                                                                C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                               /*                                                                           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                * Value of len should be equal to or smaller than USBGEN_EP_SIZE.           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                * This check forces the value of len to meet the precondition.              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                */                                                                          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00154a   0efc     MOVLW     0xfc           	if(len > USBGEN_EP_SIZE)                                                        C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00154c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00154e   0840     SUBLW     0x40                                                                                            
001550   e205     BC        0x155c                                                                                          
001552   0e40     MOVLW     0x40           	    len = USBGEN_EP_SIZE;                                                       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001554   6ef3     MOVWF     0xf3,0x0                                                                                        
001556   0efc     MOVLW     0xfc                                                                                            
001558   cff3     MOVFF     0xff3,0xfdb                                                                                     
00155a   ffdb                                                                                                               
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                              /*                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                               * Copy data from user's buffer to dual-ram buffer                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                               */                                                                           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00155c   6adf     CLRF      0xdf,0x0           for (i = 0; i < len; i++)                                                    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00155e   0efc     MOVLW     0xfc                                                                                            
001560   50db     MOVF      0xdb,0x0,0x0                                                                                    
001562   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001564   e219     BC        0x1598                                                                                          
001594   2adf     INCF      0xdf,0x1,0x0                                                                                    
001596   d7e3     BRA       0x155e                                                                                          
001566   50df     MOVF      0xdf,0x0,0x0       	usbgen_in[i] = buffer[i];                                                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001568   6ee7     MOVWF     0xe7,0x0                                                                                        
00156a   0efd     MOVLW     0xfd                                                                                            
00156c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00156e   ffe9                                                                                                               
001570   0efe     MOVLW     0xfe                                                                                            
001572   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001574   ffea                                                                                                               
001576   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001578   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00157a   0e00     MOVLW     0x0                                                                                             
00157c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00157e   50ef     MOVF      0xef,0x0,0x0                                                                                    
001580   6ee6     MOVWF     0xe6,0x0                                                                                        
001582   50df     MOVF      0xdf,0x0,0x0                                                                                    
001584   6aea     CLRF      0xea,0x0                                                                                        
001586   0f68     ADDLW     0x68                                                                                            
001588   6ee9     MOVWF     0xe9,0x0                                                                                        
00158a   0e04     MOVLW     0x4                                                                                             
00158c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00158e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001590   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001592   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001598   0efc     MOVLW     0xfc               USBGEN_BD_IN.Cnt = len;                                                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00159a   cfdb     MOVFF     0xfdb,0x40d                                                                                     
00159c   f40d                                                                                                               
00159e   0e40     MOVLW     0x40               mUSBBufferReady(USBGEN_BD_IN);                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015a0   0104     MOVLB     0x4                                                                                             
0015a2   170c     ANDWF     0xc,0x1,0x1                                                                                     
0015a4   7d0c     BTG       0xc,0x6,0x1                                                                                     
0015a6   0e88     MOVLW     0x88                                                                                            
0015a8   130c     IORWF     0xc,0x1,0x1                                                                                     
                                           		//mod by Tim                                                                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           		//CodeSectionAccessed(0x2);                                                    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           		//end mod by Tim                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015aa   52e5     MOVF      0xe5,0x1,0x0   }//end USBGenWrite                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015ac   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015ae   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0015b0   ffd9                                                                                                               
0015b2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Function:        byte USBGenRead(byte *buffer, byte len)                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  maximum endpoint size responsible for receiving report       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  data from USB host for HID class.                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  Input argument 'buffer' should point to a buffer area that   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  is bigger or equal to the size specified by 'len'.           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  len     : The number of bytes expected.                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Output:          The number of bytes copied to buffer.                        C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Side Effects:    Publicly accessible variable usbgen_rx_len is updated        C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  with the number of bytes copied to buffer.                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  Once USBGenRead is called, subsequent retrieval of           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  usbgen_rx_len can be done by calling macro                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  mUSBGenGetRxLength().                                        C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Overview:        USBGenRead copies a string of bytes received through         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  the OUT endpoint to a user's specified location.             C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  It is a non-blocking function. It does not wait              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  for data if there is no data available. Instead it returns   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  '0' to notify the caller that there is no data available.    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            * Note:            If the actual number of bytes received is larger than the    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  number of bytes expected (len), only the expected number     C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  of bytes specified will be copied to buffer.                 C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  If the actual number of bytes received is smaller than the   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  number of bytes expected (len), only the actual number       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *                  of bytes received will be copied to buffer.                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015b4   cfd9     MOVFF     0xfd9,0xfe6    byte USBGenRead(byte *buffer, byte len)                                          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015b6   ffe6                                                                                                               
0015b8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0015ba   ffd9                                                                                                               
                                           {                                                                                C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015bc   0100     MOVLB     0x0                usbgen_rx_len = 0;                                                           C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015be   6bfa     CLRF      0xfa,0x1                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015c0   0104     MOVLB     0x4                if(!mUSBGenRxIsBusy())                                                       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015c2   bf08     BTFSC     0x8,0x7,0x1                                                                                     
0015c4   d030     BRA       0x1626                                                                                          
                                               {                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                   /*                                                                       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                    * Adjust the expected number of bytes to equal                          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                    * the actual number of bytes received.                                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                    */                                                                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015c6   0efc     MOVLW     0xfc                   if(len > USBGEN_BD_OUT.Cnt)                                              C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015c8   cfdb     MOVFF     0xfdb,0x14                                                                                      
0015ca   f014                                                                                                               
0015cc   5109     MOVF      0x9,0x0,0x1                                                                                     
0015ce   80d8     BSF       0xd8,0x0,0x0                                                                                    
0015d0   5414     SUBFWB    0x14,0x0,0x0                                                                                    
0015d2   e203     BC        0x15da                                                                                          
0015d4   0efc     MOVLW     0xfc                       len = USBGEN_BD_OUT.Cnt;                                             C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015d6   c409     MOVFF     0x409,0xfdb                                                                                     
0015d8   ffdb                                                                                                               
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                   /*                                                                       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                    * Copy data from dual-ram buffer to user's buffer                       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                    */                                                                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015da   0100     MOVLB     0x0                    for(usbgen_rx_len = 0; usbgen_rx_len < len; usbgen_rx_len++)             C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015dc   6bfa     CLRF      0xfa,0x1                                                                                        
0015de   0efc     MOVLW     0xfc                                                                                            
0015e0   50db     MOVF      0xdb,0x0,0x0                                                                                    
0015e2   5dfa     SUBWF     0xfa,0x0,0x1                                                                                    
0015e4   e219     BC        0x1618                                                                                          
001614   2bfa     INCF      0xfa,0x1,0x1                                                                                    
001616   d7e3     BRA       0x15de                                                                                          
0015e6   51fa     MOVF      0xfa,0x0,0x1               buffer[usbgen_rx_len] = usbgen_out[usbgen_rx_len];                   C:\datalogger\firmware\system\usb\class\generic\usbgen.c
0015e8   6aea     CLRF      0xea,0x0                                                                                        
0015ea   0f28     ADDLW     0x28                                                                                            
0015ec   6ee9     MOVWF     0xe9,0x0                                                                                        
0015ee   0e04     MOVLW     0x4                                                                                             
0015f0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0015f2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0015f4   6ee6     MOVWF     0xe6,0x0                                                                                        
0015f6   51fa     MOVF      0xfa,0x0,0x1                                                                                    
0015f8   6ee7     MOVWF     0xe7,0x0                                                                                        
0015fa   0efd     MOVLW     0xfd                                                                                            
0015fc   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0015fe   ffe9                                                                                                               
001600   0efe     MOVLW     0xfe                                                                                            
001602   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001604   ffea                                                                                                               
001606   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001608   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00160a   0e00     MOVLW     0x0                                                                                             
00160c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00160e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001610   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001612   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                   /*                                                                       C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                    */                                                                      C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001618   0104     MOVLB     0x4                    USBGEN_BD_OUT.Cnt = sizeof(usbgen_out);                                  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00161a   0e40     MOVLW     0x40                                                                                            
00161c   6f09     MOVWF     0x9,0x1                                                                                         
00161e   1708     ANDWF     0x8,0x1,0x1            mUSBBufferReady(USBGEN_BD_OUT);                                          C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001620   7d08     BTG       0x8,0x6,0x1                                                                                     
001622   0e88     MOVLW     0x88                                                                                            
001624   1308     IORWF     0x8,0x1,0x1                                                                                     
                                               }//end if                                                                    C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001626   0100     MOVLB     0x0                return usbgen_rx_len;                                                        C:\datalogger\firmware\system\usb\class\generic\usbgen.c
001628   51fa     MOVF      0xfa,0x0,0x1                                                                                    
00162a   d000     BRA       0x162c                                                                                          
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00162c   52e5     MOVF      0xe5,0x1,0x0   }//end USBGenRead                                                                C:\datalogger\firmware\system\usb\class\generic\usbgen.c
00162e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001630   ffd9                                                                                                               
001632   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           #endif //def USB_USE_GEN                                                         C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                                                                                                            C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /** EOF usbgen.c *************************************************************/  C:\datalogger\firmware\system\usb\class\generic\usbgen.c
                                           /**                                                                              C:\datalogger\firmware\logic\logic.c
                                            * SB3 Datalogger Project                                                        C:\datalogger\firmware\logic\logic.c
                                            * David Turner & Jon Sowman 2012                                                C:\datalogger\firmware\logic\logic.c
                                            */                                                                              C:\datalogger\firmware\logic\logic.c
                                           #include <p18cxxx.h>                                                             C:\datalogger\firmware\logic\logic.c
                                           #include <usart.h>                                                               C:\datalogger\firmware\logic\logic.c
                                           #include <timers.h>                                                              C:\datalogger\firmware\logic\logic.c
                                           #include "system\typedefs.h"                                                     C:\datalogger\firmware\logic\logic.c
                                           #include "system\usb\usb.h"                                                      C:\datalogger\firmware\logic\logic.c
                                           #include "io_cfg.h"                                                              C:\datalogger\firmware\logic\logic.c
                                                                                                                            C:\datalogger\firmware\logic\logic.c
                                           /**                                                                              C:\datalogger\firmware\logic\logic.c
                                            * Set up an interrupt to run at the samplerate,                                 C:\datalogger\firmware\logic\logic.c
                                            * discard data for now.                                                         C:\datalogger\firmware\logic\logic.c
                                            */                                                                              C:\datalogger\firmware\logic\logic.c
001816   cfd9     MOVFF     0xfd9,0xfe6    void initAcquisition(uint16_t samplerate)                                        C:\datalogger\firmware\logic\logic.c
001818   ffe6                                                                                                               
00181a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00181c   ffd9                                                                                                               
                                           {	                                                                               C:\datalogger\firmware\logic\logic.c
                                           	// Enable interrupt priority                                                    C:\datalogger\firmware\logic\logic.c
00181e   8ed0     BSF       0xd0,0x7,0x0   	RCONbits.IPEN = 1;                                                              C:\datalogger\firmware\logic\logic.c
                                                                                                                            C:\datalogger\firmware\logic\logic.c
                                           	// Stop timer                                                                   C:\datalogger\firmware\logic\logic.c
001820   9ed5     BCF       0xd5,0x7,0x0   	T0CONbits.TMR0ON = 0;                                                           C:\datalogger\firmware\logic\logic.c
                                                                                                                            C:\datalogger\firmware\logic\logic.c
                                           	// Set to 8 bit mode                                                            C:\datalogger\firmware\logic\logic.c
001822   8cd5     BSF       0xd5,0x6,0x0   	T0CONbits.T08BIT = 1;                                                           C:\datalogger\firmware\logic\logic.c
                                                                                                                            C:\datalogger\firmware\logic\logic.c
                                           	// Clock on instruction clock cycles                                            C:\datalogger\firmware\logic\logic.c
001824   9ad5     BCF       0xd5,0x5,0x0   	T0CONbits.T0CS = 0;                                                             C:\datalogger\firmware\logic\logic.c
                                           	                                                                                C:\datalogger\firmware\logic\logic.c
                                           	// 256 prescaler                                                                C:\datalogger\firmware\logic\logic.c
001826   96d5     BCF       0xd5,0x3,0x0   	T0CONbits.PSA = 0;                                                              C:\datalogger\firmware\logic\logic.c
001828   84d5     BSF       0xd5,0x2,0x0   	T0CONbits.T0PS2 = 1;                                                            C:\datalogger\firmware\logic\logic.c
00182a   82d5     BSF       0xd5,0x1,0x0   	T0CONbits.T0PS1  = 1;                                                           C:\datalogger\firmware\logic\logic.c
00182c   80d5     BSF       0xd5,0x0,0x0   	T0CONbits.T0PS0 = 1;                                                            C:\datalogger\firmware\logic\logic.c
                                                                                                                            C:\datalogger\firmware\logic\logic.c
                                           	// Enable TIMER0 OVF interrupt, periph interrupt                                C:\datalogger\firmware\logic\logic.c
                                           	// and global interrupts                                                        C:\datalogger\firmware\logic\logic.c
00182e   8af2     BSF       0xf2,0x5,0x0   	INTCONbits.TMR0IE = 1;                                                          C:\datalogger\firmware\logic\logic.c
001830   94f2     BCF       0xf2,0x2,0x0   	INTCONbits.TMR0IF = 0;                                                          C:\datalogger\firmware\logic\logic.c
001832   8cf2     BSF       0xf2,0x6,0x0   	INTCONbits.GIEL  = 1;                                                           C:\datalogger\firmware\logic\logic.c
001834   8ef2     BSF       0xf2,0x7,0x0   	INTCONbits.GIEH = 1;                                                            C:\datalogger\firmware\logic\logic.c
                                                                                                                            C:\datalogger\firmware\logic\logic.c
                                           	// Set TIMER0 OVF to high priority                                              C:\datalogger\firmware\logic\logic.c
001836   84f1     BSF       0xf1,0x2,0x0   	INTCON2bits.TMR0IP = 1;                                                         C:\datalogger\firmware\logic\logic.c
                                                                                                                            C:\datalogger\firmware\logic\logic.c
                                           	// Finally enable the timer                                                     C:\datalogger\firmware\logic\logic.c
001838   8ed5     BSF       0xd5,0x7,0x0   	T0CONbits.TMR0ON = 1;                                                           C:\datalogger\firmware\logic\logic.c
00183a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\datalogger\firmware\logic\logic.c
00183c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00183e   ffd9                                                                                                               
001840   0012     RETURN    0x0                                                                                             
                                                   LIST P=18F4550                                                           C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   LIST                                                                     C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                           ;	RCS Header $Id: fxm1616s.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;	$Revision: 1.3 $                                                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           	include <P18CXXX.INC>		; general Golden Gate definitions                        C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                   LIST                                                                     C:\MCC18\MPASM\P18CXXX.INC
                                           ; P18CXXX.INC  Standard Header File, Version 1.00   Microchip Technology, Inc.   C:\MCC18\MPASM\P18CXXX.INC
                                                   LIST                                                                     C:\MCC18\MPASM\P18C452.INC
                                           ; P18C452.INC  Standard Header File, Version 0.12   Microchip Technology, Inc.   C:\MCC18\MPASM\P18C452.INC
                                                   LIST                                                                     C:\MCC18\MPASM\P18C452.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C242                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C242.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F242                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F242.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F248                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F248.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C252                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C252.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F252                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F252.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F258                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F258.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C442                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C442.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F442                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F442.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F448                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F448.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C452                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C452.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F452                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F452.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F458                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F458.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C601                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C601.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C658                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C658.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C801                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C801.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18C858                                                                 C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18C858.INC>                                                       C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F1220                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F1220.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F1320                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F1320.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2220                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2220.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2320                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2320.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4220                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4220.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4320                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4320.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6520                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6520.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6620                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6620.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6720                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6720.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8520                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8520.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8620                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8620.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8720                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8720.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2439                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2439.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2539                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2539.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4439                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4439.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4539                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4539.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8680                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8680.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6680                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6680.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8585                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8585.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6585                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6585.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6621                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6621.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8621                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8621.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6525                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6525.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8525                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8525.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2331                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2331.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2431                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2431.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4331                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4331.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4431                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4431.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2515                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2515.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2525                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2525.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2610                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2610.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2620                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2620.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4515                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4515.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4525                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4525.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4610                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4610.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4620                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4620.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6410                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6410.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6490                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6490.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8410                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8410.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8490                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8490.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2585                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2585.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2680                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2680.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2681                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2681.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4585                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4585.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4680                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4680.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4681                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4681.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2510                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2510.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2520                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2520.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4510                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4510.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4520                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4520.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2455                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2455.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2550                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2550.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4455                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4455.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4550                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4550.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2410                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2410.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2420                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2420.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4410                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4410.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4420                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4420.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2480                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2480.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2580                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2580.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4480                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4480.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4580                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4580.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6310                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6310.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6390                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6390.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8310                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8310.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8390                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8390.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6627                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6627.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6722                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6722.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8627                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8627.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8722                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8722.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F65J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F65J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F65J15                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F65J15.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J15                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J15.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F67J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F67J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F85J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F85J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F85J15                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F85J15.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J15                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J15.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F87J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F87J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6527                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6527.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F6622                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F6622.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8527                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8527.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F8622                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F8622.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F24J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F24J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F25J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F25J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F44J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F44J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F45J10                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F45J10.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2221                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2221.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2321                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2321.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4221                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4221.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4321                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4321.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F97J60                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F97J60.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F96J65                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F96J65.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F96J60                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F96J60.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F87J60                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F87J60.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J65                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J65.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J60                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J60.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F67J60                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F67J60.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J65                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J65.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J60                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J60.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F1331                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F1331.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F1330                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F1330.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F1231                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F1231.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F1230                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F1230.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4450                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4450.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2450                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2450.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4523                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4523.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4423                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4423.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2523                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2523.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2423                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2423.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F85J90                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F85J90.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F84J90                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F84J90.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F83J90                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F83J90.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F65J90                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F65J90.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F64J90                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F64J90.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F63J90                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F63J90.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F45K20                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F45K20.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F25K20                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F25K20.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4685                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4685.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2685                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2685.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F85J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F85J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F84J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F84J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F83J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F83J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F65J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F65J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F64J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F64J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F63J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F63J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4682                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4682.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2682                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2682.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F87J50                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F87J50.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J55                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J55.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J50                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J50.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F85J50                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F85J50.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F67J50                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F67J50.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J55                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J55.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J50                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J50.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F65J50                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F65J50.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F87J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F87J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J16                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J16.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F86J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F86J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F67J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F67J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J16                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J16.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F66J11                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F66J11.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F44K20                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F44K20.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F24K20                                                               C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F24K20.INC>                                                     C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2458                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2458.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F2553                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F2553.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4458                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4458.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                             IFDEF __18F4553                                                                C:\MCC18\MPASM\P18CXXX.INC
                                                INCLUDE <P18F4553.INC>                                                      C:\MCC18\MPASM\P18CXXX.INC
                                             ENDIF                                                                          C:\MCC18\MPASM\P18CXXX.INC
                                                                                                                            C:\MCC18\MPASM\P18CXXX.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           	include <CMATH18.INC>		; Math library definitions                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;	RCS Header $Id: cmath18.inc,v 1.3 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\SRC\TRADIT~1\MATH\CMATH18.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\CMATH18.INC
                                           ;	$Revision: 1.3 $                                                               C:\MCC18\SRC\TRADIT~1\MATH\CMATH18.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\CMATH18.INC
                                               LIST                                                                         C:\MCC18\SRC\TRADIT~1\MATH\CMATH18.INC
                                           ; CMATH18.INC  v1.0  Microchip Technology, Inc. / F.J. Testa                     C:\MCC18\SRC\TRADIT~1\MATH\CMATH18.INC
                                                   LIST                                                                     C:\MCC18\SRC\TRADIT~1\MATH\CMATH18.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           	include <AARG.INC>		; AARG declarations                                         C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;	RCS Header $Id: aarg.inc,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                           ;       CMATH18 DATA DECLARATION FILE                                            C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                           	EXTERN	__AARGB0, __AARGB1, __AARGB2, __AARGB3                                   C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                                   EXTERN  __AARGB4, __AARGB5, __AARGB6, __AARGB7                           C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                           	EXTERN  __AEXP                                                                  C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                           	EXTERN  __REMB3, __REMB2, __REMB1, __REMB0                                      C:\MCC18\SRC\TRADIT~1\MATH\AARG.INC
                                           	                                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           	include <BARG.INC>		; BARG declarations                                         C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;	RCS Header $Id: barg.inc,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\SRC\TRADIT~1\MATH\BARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\BARG.INC
                                           ;       CMATH18 DATA DECLARATION FILE                                            C:\MCC18\SRC\TRADIT~1\MATH\BARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\BARG.INC
                                                   EXTERN  __BARGB3, __BARGB2, __BARGB1, __BARGB0                           C:\MCC18\SRC\TRADIT~1\MATH\BARG.INC
                                                   EXTERN  __BEXP                                                           C:\MCC18\SRC\TRADIT~1\MATH\BARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           	include <TEMPARG.INC>		; TEMPARG declarations                                   C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;	RCS Header $Id: temparg.inc,v 1.3 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\SRC\TRADIT~1\MATH\TEMPARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\TEMPARG.INC
                                           ;       CMATH18 DATA DECLARATION FILE                                            C:\MCC18\SRC\TRADIT~1\MATH\TEMPARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\TEMPARG.INC
                                                   EXTERN  __TEMPB3, __TEMPB2, __TEMPB1, __TEMPB0, __TEMP                   C:\MCC18\SRC\TRADIT~1\MATH\TEMPARG.INC
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;********************************************************************************************** C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;********************************************************************************************** C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       16x16 Bit Signed Fixed Point Multiply 16 x 16 -> 32                      C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       Input:  16 bit signed fixed point multiplicand in AARGB0, AARGB1         C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;               16 bit signed fixed point multiplier in BARGB0, BARGB1           C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       Use:    CALL    FXM1616S                                                 C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       Output: 32 bit signed fixed point product in AARGB0, AARGB1,             C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;               AARGB2, AARGB3                                                   C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       Result: AARG  <--  AARG * BARG                                           C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       Max Timing:     39 clks                                                  C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       Min Timing:     31 clks                                                  C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;       PM: 38              DM: 8                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           PROG	CODE                                                                        C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           FXM1616S                                                                         C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           		GLOBAL	FXM1616S                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
00178a   c009     MOVFF     0x9,0x13       		MOVFF	__AARGB0,__TEMPB0                                                        C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
00178c   f013                                                                                                               
00178e   c008     MOVFF     0x8,0x12       		MOVFF	__AARGB1,__TEMPB1	                                                       C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
001790   f012                                                                                                               
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
001792   5008     MOVF      0x8,0x0,0x0    		MOVF	__AARGB1,W                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
001794   020d     MULWF     0xd,0x0        		MULWF	__BARGB1                                                                 C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
001796   cff4     MOVFF     0xff4,0x7      		MOVFF	PRODH,__AARGB2                                                           C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
001798   f007                                                                                                               
00179a   cff3     MOVFF     0xff3,0x6      		MOVFF	PRODL,__AARGB3                                                           C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
00179c   f006                                                                                                               
                                           		                                                                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
00179e   5009     MOVF      0x9,0x0,0x0    		MOVF	__AARGB0,W                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017a0   020e     MULWF     0xe,0x0        		MULWF	__BARGB0                                                                 C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017a2   cff4     MOVFF     0xff4,0x9      		MOVFF	PRODH,__AARGB0                                                           C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017a4   f009                                                                                                               
0017a6   cff3     MOVFF     0xff3,0x8      		MOVFF	PRODL,__AARGB1                                                           C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017a8   f008                                                                                                               
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017aa   020d     MULWF     0xd,0x0        		MULWF	__BARGB1                                                                 C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017ac   50f3     MOVF      0xf3,0x0,0x0   		MOVF	PRODL,W                                                                   C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017ae   2607     ADDWF     0x7,0x1,0x0    		ADDWF	__AARGB2,F                                                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017b0   50f4     MOVF      0xf4,0x0,0x0   		MOVF	PRODH,W                                                                   C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017b2   2208     ADDWFC    0x8,0x1,0x0    		ADDWFC	__AARGB1,F                                                              C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017b4   6ae8     CLRF      0xe8,0x0       		CLRF	WREG                                                                      C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017b6   2209     ADDWFC    0x9,0x1,0x0    		ADDWFC	__AARGB0,F                                                              C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017b8   5012     MOVF      0x12,0x0,0x0   		MOVF	__TEMPB1,W                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017ba   020e     MULWF     0xe,0x0        		MULWF	__BARGB0                                                                 C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017bc   50f3     MOVF      0xf3,0x0,0x0   		MOVF	PRODL,W                                                                   C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017be   2607     ADDWF     0x7,0x1,0x0    		ADDWF	__AARGB2,F                                                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017c0   50f4     MOVF      0xf4,0x0,0x0   		MOVF	PRODH,W                                                                   C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017c2   2208     ADDWFC    0x8,0x1,0x0    		ADDWFC	__AARGB1,F                                                              C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017c4   6ae8     CLRF      0xe8,0x0       		CLRF	WREG                                                                      C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017c6   2209     ADDWFC    0x9,0x1,0x0    		ADDWFC	__AARGB0,F                                                              C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017c8   ae0e     BTFSS     0xe,0x7,0x0    		BTFSS	__BARGB0,MSB                                                             C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017ca   efeb     GOTO      0x17d6         		GOTO	TSIGN1616A                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017cc   f00b                                                                                                               
0017ce   5012     MOVF      0x12,0x0,0x0   		MOVF	__TEMPB1,W                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017d0   5e08     SUBWF     0x8,0x1,0x0    		SUBWF	__AARGB1,F                                                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017d2   5013     MOVF      0x13,0x0,0x0   		MOVF	__TEMPB0,W                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017d4   5a09     SUBWFB    0x9,0x1,0x0    		SUBWFB	__AARGB0,F                                                              C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           TSIGN1616A                                                                       C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017d6   ae13     BTFSS     0x13,0x7,0x0   		BTFSS	__TEMPB0,MSB                                                             C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017d8   0c00     RETLW     0x0            		RETLW	0x00                                                                     C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017da   500d     MOVF      0xd,0x0,0x0    		MOVF	__BARGB1,W                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017dc   5e08     SUBWF     0x8,0x1,0x0    		SUBWF	__AARGB1,F                                                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017de   500e     MOVF      0xe,0x0,0x0    		MOVF	__BARGB0,W                                                                C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017e0   5a09     SUBWFB    0x9,0x1,0x0    		SUBWFB	__AARGB0,F                                                              C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           		                                                                               C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
0017e2   0c00     RETLW     0x0            		RETLW	0x00                                                                     C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           		END                                                                            C:\MCC18\SRC\TRADIT~1\MATH\fxm1616s.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.5 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           __FPFLAGSbits                                                                    C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           __FPFLAGS		RES 1       ; floating point library exception flags                  C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   GLOBAL  SIGN, __FPFLAGS, __FPFLAGSbits                                   C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           	                                                                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;	RCS Header $Id: aarg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB3                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB7		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB2                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB6		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB1                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB5		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB0                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB4		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB3		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB2		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB1		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB0		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AEXP		RES 1       ; 8 bit biased exponent for argument A                       C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL	__AARGB0, __AARGB1, __AARGB2, __AARGB3                                   C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   GLOBAL  __AARGB4, __AARGB5, __AARGB6, __AARGB7                           C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  __AEXP                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  __REMB3, __REMB2, __REMB1, __REMB0                                      C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;	RCS Header $Id: barg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB3		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB2		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB1		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB0		RES 1       ; most significant byte of argument B                      C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BEXP		RES 1       ; 8 bit biased exponent for argument B                       C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  __BARGB3, __BARGB2, __BARGB1, __BARGB0                           C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  __BEXP                                                           C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;	RCS Header $Id: temparg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           __TEMPB3		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           __TEMPB2		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           __TEMPB1		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           __TEMP                                                                           C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           __TEMPB0		RES 1       ; temporary storage                                        C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                   GLOBAL  __TEMPB3, __TEMPB2, __TEMPB1, __TEMPB0, __TEMP                   C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                           	                                                                                C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\temparg.asm
                                                                                                                            C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                           /** @name __init                                                                 C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                            * The {\bf __init} is called if the linker can not find a                       C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                            * user defined version for it                                                   C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                            */                                                                              C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                                                                                                            C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                           void __init (void)                                                               C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                           {                                                                                C:\MCC18\src\TRADIT~1\stdclib\__init.c
00185e   0012     RETURN    0x0            }                                                                                C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                                                                                                            C:\MCC18\src\TRADIT~1\stdclib\__init.c
